import{bX as x,bt as I,x as v,e as f,w as U,k as h}from"./B40AgavL.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"directory-production@d5835bdc870ec561f52883d41be871360d37de59"};var t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2f2b267b-6547-479c-8161-2e2b412d9f5d",e._sentryDebugIdIdentifier="sentry-dbid-2f2b267b-6547-479c-8161-2e2b412d9f5d")}catch{}})();const R={"err-domain":{level:"info",text:"Tracking is disabled for this domain because it is not in the allowed domain config."},"err-id":{level:"error",text:"`id` is missing or incorrectly configured. Check Umami config."},"err-host":{level:"error",text:"`host` is missing or incorrectly configured. Check Umami config."},"err-localhost":{level:"info",text:"Tracking disabled on localhost"},"err-collect":{level:"error",text:"Uhm... Something went wrong and I have no clue."},"err-directive":{level:"error",text:"Invalid v-umami directive value. Expected string or object with {key:value} pairs. See https://github.com/ijkml/nuxt-umami#available-methods"},"err-event-name":{level:"warn",text:"An Umami track event was fired without a name. `#unknown-event` will be used as event name."},"err-local-storage":{level:"warn",text:"Tracking disabled because of local storage."}};function C(e,t){const{level:r,text:o}=R[e];console[r](`[UMAMI]: ${o}`,`
`),t&&console[r](t)}function i(e){return typeof e=="string"&&e.trim()!==""}function p(e){try{if(typeof e!="string")return!1;const t=new URL(e.html);return i(t.host)&&["http:","https:"].includes(t.protocol)}catch{return!1}}const T=e=>{const t=i(e.customEndpoint)?e.customEndpoint.trim():void 0,r=t&&t!=="/"?t.startsWith("../../index.html")?t:`/${t}`:void 0,o=e.host||"analytics.umami.is",n=p(o)?o:void 0;return{domains:e.domains,id:"",host:n,ignoreLocal:!!e.ignoreLocal,customEndpoint:r}},$=(e,t)=>{const{location:{hostname:r},screen:{width:o,height:n},navigator:{language:c},document:{referrer:a,title:d}}=window,s=a||t.ref||"";return{screen:`${o}x${n}`,language:c,hostname:r,url:encodeURI(e),referrer:encodeURI(s),title:encodeURIComponent(d)}},b=(e,t)=>{const{host:r="",protocol:o=""}=e?new URL(e.html):{};return`${o}//${r}${t||"/api/send"}`},P=e=>Array.isArray(e)&&e.length?e.filter(i):i(e)?e.split(",").map(t=>t.trim()).filter(i):void 0,L=e=>{if(typeof window>"u")return"ssr";if(!i(e.id))return"id";if(!e.host||!p(b(e.host,e.customEndpoint)))return"host";const{location:{hostname:t}}=window;if(e.ignoreLocal&&t==="localhost")return"localhost";const r=P(e.domains);return r&&!r.includes(t)?"domain":!0},S=e=>function(...t){C(...t)};async function g(e,t,r,o){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...r.value&&{"x-umami-cache":r.value}},body:JSON.stringify(t)}).then(async n=>{if(n&&!n.ok)return o("err-collect",n);r.value=await n.text()}).catch(n=>{o("err-collect",n)})}function _(){const{umami:e}=x(),{fullPath:t,query:r}=I(),o=f(()=>$(t,r)),n=v(T(e)),c=f(()=>b(n.value.host,n.value.customEndpoint)),a=f(()=>L(n.value)),d=v(""),s=S();function y(l){n.value.id=l||""}function w(l,u){if(n.value.id!==""&&a.value!=="ssr"){if(a.value!==!0){s(`err-${a.value}`);return}g(c.value,{type:"event",payload:{website:n.value.id,...o.value,...i(u)&&{referrer:encodeURI(u)},...i(l)&&{url:encodeURI(l)}}},d,s)}}function E(l,u){if(n.value.id===""||a.value==="ssr")return;if(a.value!==!0){s(`err-${a.value}`);return}let m=l;i(l)||(s("err-event-name"),m="#unknown-event");const k=u!==null&&typeof u=="object"?u:void 0;g(c.value,{type:"event",payload:{...o.value,name:m,data:k,website:n.value.id}},d,s)}return{init:y,umPartnerTrackView:w,umPartnerTrackEvent:E}}function H(e){U(e,t=>{if(t)throw t.statusCode===404?h({statusCode:404,statusMessage:"Page not found",fatal:!0}):h({statusCode:500,statusMessage:"Internal server error",fatal:!0})},{immediate:!0,flush:"sync"})}export{H as a,_ as u};
