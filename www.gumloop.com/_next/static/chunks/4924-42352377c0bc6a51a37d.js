"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4924],{54348:function(e,r,i){var l=i(85893),s=i(67294),t=i(49200),n=i(64127);r.Z=e=>{let{form:r}=e;return(0,l.jsx)(s.Fragment,{children:(0,l.jsx)(t.l0,{...r,children:(0,l.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,l.jsx)("div",{className:"flex flex-col gap-5",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,l.jsx)(t.Wi,{control:r.control,name:"firstName",render:e=>{let{field:r}=e;return(0,l.jsxs)(t.xJ,{className:"flex-1",children:[(0,l.jsx)(t.lX,{children:"First Name"}),(0,l.jsx)(t.NI,{children:(0,l.jsx)(n.I,{placeholder:"Enter your first name",...r})}),(0,l.jsx)(t.zG,{})]})}}),(0,l.jsx)(t.Wi,{control:r.control,name:"lastName",render:e=>{let{field:r}=e;return(0,l.jsxs)(t.xJ,{className:"flex-1",children:[(0,l.jsx)(t.lX,{children:"Last Name"}),(0,l.jsx)(t.NI,{children:(0,l.jsx)(n.I,{placeholder:"Enter your last name",...r})}),(0,l.jsx)(t.zG,{})]})}})]})})})})})}},53839:function(e,r,i){i.d(r,{a:function(){return y}});var l=i(85893),s=i(67294),t=i(23432),n=i(78865),a=i(56312),o=i(73569),c=i(87536),u=i(64712),d=i(13472),m=i(97387),x=i(29876),f=i(7161),p=i(49200),h=i(64127),g=i(20479),j=i(54348),v=i(23224),b=i(99577),P=i(45837);let _=d.ZP.object({firstName:d.ZP.string().min(1),lastName:d.ZP.string().min(1),profilePicture:d.ZP.any()}),y=e=>{var r;let{isOpen:i,onClose:d,onSuccess:y}=e,{userProfile:N}=(0,P.H)(),{onProfileUpdate:Z}=(0,b.Z)(),w=(0,s.useMemo)(()=>N.first_name&&N.last_name,[N.first_name,N.last_name]),C=(0,s.useMemo)(()=>!!N.profile_picture,[N.profile_picture]),z=(0,s.useMemo)(()=>!w||!C,[w,C]),k=(0,s.useMemo)(()=>({firstName:(null==N?void 0:N.first_name)||"",lastName:(null==N?void 0:N.last_name)||"",profilePicture:(null==N?void 0:N.profile_picture)||void 0}),[N]),E=(0,c.cI)({resolver:(0,a.F)(_),defaultValues:k,mode:"onChange"});(0,s.useEffect)(()=>{i&&N&&E.reset(k)},[i,N,k]);let[I,S]=(0,s.useState)(!1),T=async()=>{let e=E.getValues();if(!E.formState.isValid){u.Am.error("Please fill out all required fields");return}if(!e.profilePicture){u.Am.error("Please upload a profile picture"),E.setError("profilePicture",{type:"manual",message:"Profile picture is required"});return}try{S(!0),await Z(e),u.Am.success("Profile details saved successfully")}catch(e){console.error("Failed to save profile details:",e),u.Am.error("Failed to save profile details")}finally{S(!1)}},A=(0,s.useMemo)(()=>{var e;return{username:(null===(e=N.user_email)||void 0===e?void 0:e.split("@")[0].toLowerCase())||"",tagline:"",bio:"",twitter_url:"",linkedin_url:"",website_url:"",is_public:!0}},[N.user_email]),{form:J,isSaving:M,isValidatingUsername:U,handleUsernameChange:F,onSubmit:G}=(0,v.j)({defaultValues:A,onSuccess:y,onClose:d,successMessage:"Public profile created successfully",errorMessage:"Failed to create public profile"}),L=J.formState.isValid,R=(null===(r=J.formState.errors.username)||void 0===r?void 0:r.message)===void 0;return(0,s.useEffect)(()=>{i&&!z&&(J.reset(A),J.trigger())},[i,A,J,z]),(0,l.jsx)(f.Vq,{open:i,onOpenChange:d,children:(0,l.jsx)(f.cZ,{className:"max-w-2xl",children:z?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(p.l0,{...E,children:(0,l.jsxs)("form",{children:[(0,l.jsxs)(f.a7,{className:"space-y-1",children:[(0,l.jsxs)(f.fK,{children:[(0,l.jsx)(f.$N,{children:"Complete your profile"}),(0,l.jsx)(o.Be,{className:"text-muted-foreground text-sm",children:"Please add a photo and your first and last name to continue setting up your public profile."})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(j.Z,{form:E})})]}),(0,l.jsxs)(f.cN,{children:[(0,l.jsx)(x.zx,{type:"button",variant:"outline",onClick:d,disabled:I,children:"Cancel"}),(0,l.jsx)(x.zx,{type:"button",onClick:T,disabled:!E.formState.isValid||!E.watch("profilePicture")||I,loading:I,children:"Continue"})]})]})})}):(0,l.jsx)(p.l0,{...J,children:(0,l.jsxs)("form",{onSubmit:J.handleSubmit(G),children:[(0,l.jsxs)(f.a7,{className:"space-y-1",children:[(0,l.jsxs)(f.fK,{children:[(0,l.jsx)(f.$N,{children:"Set up your public profile"}),(0,l.jsx)(o.Be,{className:"text-muted-foreground text-sm",children:"Create a public profile to showcase your work in the Gumloop Community Templates. This information will be visible to other users."})]}),(0,l.jsx)(p.Wi,{control:J.control,name:"username",render:e=>{let{field:r}=e;return(0,l.jsxs)(p.xJ,{children:[(0,l.jsx)(p.lX,{children:"Username"}),(0,l.jsx)(p.NI,{children:(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-50 px-3 text-sm text-gray-500",children:"https://gumloop.com/creators/"}),(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(h.I,{placeholder:"username",...r,className:"rounded-l-none",onChange:e=>F(e,r,"")}),U&&(0,l.jsx)("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:(0,l.jsx)(t.Z,{className:"text-muted-foreground h-4 w-4 animate-spin"})}),R&&!U&&(0,l.jsx)("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:(0,l.jsx)(n.Z,{className:"text-success-foreground h-4 w-4"})})]})]})})}),(0,l.jsx)(p.zG,{})]})}}),(0,l.jsx)(p.Wi,{control:J.control,name:"tagline",render:e=>{let{field:r}=e;return(0,l.jsxs)(p.xJ,{children:[(0,l.jsx)(p.lX,{children:"Tagline"}),(0,l.jsx)(p.NI,{children:(0,l.jsx)(h.I,{placeholder:"A short description of yourself",...r})}),(0,l.jsx)(p.zG,{})]})}}),(0,l.jsx)(p.Wi,{control:J.control,name:"bio",render:e=>{let{field:r}=e;return(0,l.jsxs)(p.xJ,{children:[(0,l.jsx)(p.lX,{children:"Bio"}),(0,l.jsx)(p.NI,{children:(0,l.jsx)(g.g,{placeholder:"Tell us about yourself and your expertise",className:"min-h-[100px]",...r})}),(0,l.jsx)(p.zG,{})]})}}),(0,l.jsx)(m.Z,{}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,l.jsx)(p.Wi,{control:J.control,name:"twitter_url",render:e=>{let{field:r}=e;return(0,l.jsxs)(p.xJ,{children:[(0,l.jsx)(p.lX,{children:"X URL"}),(0,l.jsx)(p.NI,{children:(0,l.jsx)(h.I,{placeholder:"https://x.com/yourusername",...r})}),(0,l.jsx)(p.zG,{})]})}}),(0,l.jsx)(p.Wi,{control:J.control,name:"linkedin_url",render:e=>{let{field:r}=e;return(0,l.jsxs)(p.xJ,{children:[(0,l.jsx)(p.lX,{children:"LinkedIn URL"}),(0,l.jsx)(p.NI,{children:(0,l.jsx)(h.I,{placeholder:"https://linkedin.com/in/yourusername",...r})}),(0,l.jsx)(p.zG,{})]})}})]}),(0,l.jsx)(p.Wi,{control:J.control,name:"website_url",render:e=>{let{field:r}=e;return(0,l.jsxs)(p.xJ,{children:[(0,l.jsx)(p.lX,{children:"Website URL"}),(0,l.jsx)(p.NI,{children:(0,l.jsx)(h.I,{placeholder:"https://yourwebsite.com",...r})}),(0,l.jsx)(p.zG,{})]})}}),(0,l.jsx)("div",{className:"flex justify-end gap-3"})]}),(0,l.jsxs)(f.cN,{children:[(0,l.jsx)(x.zx,{type:"button",variant:"outline",onClick:d,disabled:M,children:"Cancel"}),(0,l.jsx)(x.zx,{type:"submit",loading:M,disabled:!L||M||U,children:"Create Profile"})]})]})})})})}},21473:function(e,r,i){i.d(r,{Zv:function(){return o}});var l=i(13472);let s=l.ZP.object({name:l.ZP.string(),path:l.ZP.string().optional()}),t=l.ZP.object({title:l.ZP.string().optional(),description:l.ZP.string().optional(),node_id:l.ZP.string().min(1).optional(),category:l.ZP.string().min(1).optional(),configurable_parameters:l.ZP.array(s).optional(),is_trigger_recommendation:l.ZP.boolean().optional()}),n=l.ZP.object({interaction_id:l.ZP.string(),messages:l.ZP.array(l.ZP.any()),name:l.ZP.string().optional(),creator_name:l.ZP.string().optional(),created_ts:l.ZP.string().optional()}),a=l.ZP.object({chat_replays:l.ZP.array(n).min(1).max(3).optional()}).passthrough(),o=l.ZP.object({template_page_id:l.ZP.string().min(1).optional(),version_id:l.ZP.string().min(1).optional(),source_version_id:l.ZP.string().min(1).optional(),name:l.ZP.string().min(1,"Name is required").max(100,"Name must be less than 100 characters"),description:l.ZP.string().min(1,"Description is required"),checklist:l.ZP.array(t).optional(),body:l.ZP.string().optional(),organization_id:l.ZP.string().min(1).optional(),project_id:l.ZP.string().min(1).optional(),categories:l.ZP.array(l.ZP.object({template_category_id:l.ZP.string(),name:l.ZP.string(),slug:l.ZP.string(),organization_id:l.ZP.string().nullish()})).optional(),metadata:a.optional()}).refine(e=>!(e.organization_id&&e.project_id),{message:"Only one of organization_id or project_id can be present."})},26346:function(e,r,i){i.d(r,{ny:function(){return t},xh:function(){return n},zK:function(){return s}});var l=i(26824);let s=[l.C.REJECTED,l.C.DEPRECATED],t=[l.C.SUBMITTED,l.C.CHANGES_REQUESTED],n=[...s,...t]},23224:function(e,r,i){i.d(r,{j:function(){return f}});var l=i(67294),s=i(56312),t=i(23279),n=i.n(t),a=i(87536),o=i(64712),c=i(13472),u=i(821);let d="Failed to check username availability",m=c.z.object({username:c.z.string(),tagline:c.z.string().min(1,"Tagline is required").max(100,"Tagline must be 100 characters or less").transform(e=>(null==e?void 0:e.trim())||""),bio:c.z.string().min(1,"Bio is required").max(2500,"Bio must be 2500 characters or less").transform(e=>(null==e?void 0:e.trim())||""),twitter_url:c.z.string().refine(e=>!e||""===e||c.z.string().url().safeParse(e).success,{message:"Please enter a valid URL"}).transform(e=>(null==e?void 0:e.trim())||""),linkedin_url:c.z.string().refine(e=>!e||""===e||c.z.string().url().safeParse(e).success,{message:"Please enter a valid URL"}).transform(e=>(null==e?void 0:e.trim())||""),website_url:c.z.string().refine(e=>!e||""===e||c.z.string().url().safeParse(e).success,{message:"Please enter a valid URL"}).transform(e=>(null==e?void 0:e.trim())||""),is_public:c.z.boolean().optional()}),x={username:"",tagline:"",bio:"",twitter_url:"",linkedin_url:"",website_url:"",is_public:!0},f=e=>{let[r,i]=(0,l.useState)(!1),[t,c]=(0,l.useState)(!1),f=(0,u.QH)({path:"/creator_profile",method:u.J7.PUT}),p=(0,u.QH)({path:"/creator_profile/validate_username",method:u.J7.POST}),h=(0,a.cI)({resolver:(0,s.F)(m),defaultValues:x,mode:"onChange"}),g=(0,l.useCallback)(async(e,r,i,l)=>{if(e===r&&r){c(!1);return}try{let r=await i.mutateAsync({username:e});r.available?l.clearErrors("username"):l.setError("username",{type:"manual",message:r.error||d})}catch(e){l.setError("username",{type:"manual",message:d})}finally{c(!1)}},[]);(0,l.useEffect)(()=>{if(null==e?void 0:e.creatorProfile){var r,i,l,s,t,n,a,o;h.reset({username:(null===(r=e.creatorProfile)||void 0===r?void 0:r.username)||"",tagline:(null===(i=e.creatorProfile)||void 0===i?void 0:i.tagline)||"",bio:(null===(l=e.creatorProfile)||void 0===l?void 0:l.bio)||"",twitter_url:(null===(s=e.creatorProfile)||void 0===s?void 0:s.twitter_url)||"",linkedin_url:(null===(t=e.creatorProfile)||void 0===t?void 0:t.linkedin_url)||"",website_url:(null===(n=e.creatorProfile)||void 0===n?void 0:n.website_url)||"",is_public:(null===(a=e.creatorProfile)||void 0===a?void 0:a.is_public)||!1}),g((null===(o=e.creatorProfile)||void 0===o?void 0:o.username)||"","",p,h),h.trigger()}},[null==e?void 0:e.creatorProfile,h]);let j=(0,l.useMemo)(()=>n()(g,300),[]);(0,l.useEffect)(()=>()=>j.cancel(),[j]);let v=(0,l.useCallback)((e,r,i)=>{r.onChange(e),c(!0),j(e.target.value,i,p,h)},[j,p,h]),b=(0,l.useCallback)(async e=>await p.mutateAsync({username:e}),[p]),P=(0,l.useCallback)(async r=>{i(!0);try{var l;let s=(null==e?void 0:null===(l=e.creatorProfile)||void 0===l?void 0:l.username)||"";if(r.username!==s||!s){let e=await b(r.username);if(!e.available){h.setError("username",{type:"manual",message:e.error||"Username validation failed"}),i(!1);return}}let t={username:r.username,tagline:r.tagline,bio:r.bio,twitter_url:r.twitter_url,linkedin_url:r.linkedin_url,website_url:r.website_url,is_public:r.is_public};await f.mutateAsync(t),h.reset(t),o.Am.success((null==e?void 0:e.successMessage)||"Public profile updated successfully"),(null==e?void 0:e.onSuccess)&&e.onSuccess(),(null==e?void 0:e.onClose)&&e.onClose()}catch(r){o.Am.error((null==e?void 0:e.errorMessage)||"Failed to update public profile")}finally{i(!1)}},[f,b,h,e]);return{form:h,isSaving:r,isValidatingUsername:t,handleUsernameChange:v,onSubmit:P}}}}]);