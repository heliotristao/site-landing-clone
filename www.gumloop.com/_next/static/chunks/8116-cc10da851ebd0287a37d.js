"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8116],{9962:function(e,t,l){l.d(t,{$:function(){return F}});var n=l(85893),r=l(67294),s=l(98641),o=l(64712),a=l(29876),c=l(7161),i=l(54178),d=l(16215),u=l(4307),m=l(48578),f=l(70563),x=l(95333),h=l(13835),p=l(50016),v=l(67060),j=l(92437),g=l(42414),N=l(18998);let b=e=>{var t;let{rootName:l="Root",node:s,selectedFolderId:o,onSelect:a,currentFolderId:c,depth:i=0,expandedFolders:f,onToggleExpand:x}=e,h=s.children&&s.children.length>0,p=c===s.folder_id,g=null===s.folder_id,y=null!==(t=s.folder_id)&&void 0!==t?t:"root",C=f.has(y),w=(0,r.useCallback)(()=>{p||a(s.folder_id)},[s.folder_id,p,a]),T=(0,r.useCallback)(e=>{e.stopPropagation(),x(y)},[y,x]);return g?(0,n.jsxs)("div",{className:"select-none",children:[(0,n.jsxs)("label",{htmlFor:"folder-".concat(y),className:(0,N.cn)("flex cursor-pointer items-center gap-3 py-2 pr-2",p&&"cursor-not-allowed opacity-50"),onClick:p?void 0:w,children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,n.jsx)("div",{className:"p-0.5",children:(0,n.jsx)(d.Z,{className:"text-muted-foreground size-4 flex-none"})}),(0,n.jsx)("span",{className:"flex-1 truncate text-left text-sm font-medium",children:l}),p&&(0,n.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Current)"})]}),(0,n.jsx)(j.m,{value:y,id:"folder-".concat(y),disabled:p,className:"flex-none"})]}),h&&s.children.map(e=>(0,n.jsx)(b,{node:e,selectedFolderId:o,onSelect:a,currentFolderId:c,depth:1,expandedFolders:f,onToggleExpand:x},e.folder_id||"child-root"))]}):(0,n.jsx)("div",{className:"select-none",children:(0,n.jsxs)(v.zF,{open:C,children:[(0,n.jsxs)("label",{htmlFor:"folder-".concat(y),className:(0,N.cn)("flex cursor-pointer items-center gap-3 py-2 pr-2",p&&"cursor-not-allowed opacity-50"),onClick:p?void 0:w,children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2",style:{paddingLeft:"".concat((i-1)*16,"px")},children:[h?(0,n.jsx)(v.wy,{asChild:!0,children:(0,n.jsx)("button",{type:"button",className:"hover:bg-muted rounded p-0.5",onClick:T,children:(0,n.jsx)(u.Z,{className:(0,N.cn)("text-muted-foreground size-4 transition-transform",C&&"rotate-90")})})}):(0,n.jsx)("span",{className:"w-5"}),(0,n.jsx)(m.Z,{className:"text-muted-foreground size-4 flex-none"}),(0,n.jsx)("span",{className:"flex-1 truncate text-left text-sm font-medium",children:s.name}),p&&(0,n.jsx)("span",{className:"text-muted-foreground text-xs",children:"(Current)"})]}),(0,n.jsx)(j.m,{value:y,id:"folder-".concat(y),disabled:p,className:"flex-none"})]}),h&&(0,n.jsx)(v.Fw,{children:s.children.map(e=>(0,n.jsx)(b,{node:e,selectedFolderId:o,onSelect:a,currentFolderId:c,depth:i+1,expandedFolders:f,onToggleExpand:x},e.folder_id||"child-root"))})]})})},y=e=>{var t;let l=[null!==(t=e.folder_id)&&void 0!==t?t:"root"];if(e.children)for(let t of e.children)l.push(...y(t));return l},C=(e,t)=>{if(e.folder_id===t)return e;if(e.children)for(let l of e.children){let e=C(l,t);if(e)return e}return null},w=function(e,t){var l;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[...n,null!==(l=e.folder_id)&&void 0!==l?l:"root"];if(e.folder_id===t)return r;if(e.children)for(let l of e.children){let e=w(l,t,r);if(e)return e}return null},T=e=>{let{folderTree:t,selectedFolderId:l,onSelectFolder:s,currentFolderId:o,rootName:c="Root",isLoading:i=!1,emptyMessage:u="No folders found",emptyDescription:v="Create a folder first to organize your items"}=e,N=(0,r.useMemo)(()=>{let e=new Set(["root"]);if(t&&o){let l=w(t,o);if(l)for(let t of l)e.add(t)}return e},[t,o]),[T,F]=(0,r.useState)(N),[E,_]=(0,r.useState)(!1),k=(0,r.useMemo)(()=>!!t&&t.children.some(e=>e.children&&e.children.length>0),[t]),M=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(t&&o&&!M.current){let e=w(t,o);e&&(F(t=>{let l=new Set(t);for(let t of e)l.add(t);return l}),M.current=!0)}},[t,o]);let S=(0,r.useMemo)(()=>!t||0===t.children.length,[t]),z=(0,r.useMemo)(()=>t?y(t):[],[t]),Z=(0,r.useMemo)(()=>void 0!==l&&t?C(t,l):null,[l,t]),I=(0,r.useCallback)(e=>{F(t=>{let l=new Set(t);return l.has(e)?l.delete(e):l.add(e),l})},[]),R=(0,r.useCallback)(()=>{E?(F(new Set(["root"])),_(!1)):(F(new Set(z)),_(!0))},[E,z]),A=(0,r.useCallback)(e=>{s("root"===e?null:e)},[s]);return i?(0,n.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,n.jsx)("div",{className:"border-primary size-6 animate-spin rounded-full border-2 border-t-transparent"})}):S?(0,n.jsx)(p.Z,{title:u,description:v,Icon:f.Z,className:"py-16"}):t?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"text-muted-foreground text-sm",children:"Move to:"}),Z?(0,n.jsxs)(n.Fragment,{children:[null===Z.folder_id?(0,n.jsx)(d.Z,{className:"size-3.5"}):(0,n.jsx)(m.Z,{className:"size-3.5"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:null===Z.folder_id?c:Z.name})]}):(0,n.jsx)("span",{className:"text-muted-foreground text-sm",children:"No folder selected"})]}),k&&(0,n.jsxs)(g.u,{children:[(0,n.jsx)(g.aJ,{asChild:!0,children:(0,n.jsx)(a.zx,{type:"button",variant:"ghost",size:"icon-sm",onClick:R,className:"text-muted-foreground",children:E?(0,n.jsx)(x.Z,{}):(0,n.jsx)(h.Z,{})})}),(0,n.jsx)(g._v,{children:E?"Collapse All":"Expand All"})]})]}),(0,n.jsx)(j.E,{value:null===l?"root":null!=l?l:"",onValueChange:A,className:"max-h-96 overflow-y-auto",children:(0,n.jsx)(b,{node:t,selectedFolderId:null!=l?l:null,onSelect:s,currentFolderId:o,rootName:c,expandedFolders:T,onToggleExpand:I})})]}):null},F=e=>{let{open:t,onOpenChange:l,entity:d,entities:u,entityName:m,entityNamePlural:f,getEntityName:x,getEntityFolderId:h,folderTree:p,isLoadingTree:v=!1,currentFolderId:j,rootName:g="Root",onMove:N,onSuccess:b}=e,[y,C]=(0,r.useState)(void 0),[w,F]=(0,r.useState)(!1),[E,_]=(0,i.P)({open:t,onOpenChange:l}),k=u&&u.length>0,M=k?u:d?[d]:[],S=M.length,z=k?j:d?h(d):void 0,Z=async()=>{if(void 0===y){o.Am.error("Please select a folder");return}if(0===M.length){o.Am.error("No ".concat(m," to move"));return}F(!0);let e=k?"".concat(S," ").concat(1===S?m:f||"".concat(m,"s")):'"'.concat(x(M[0]),'"'),t=o.Am.loading("Moving ".concat(e,"..."));try{let l="root"===y?null:y;await N(k?u:d,l),_(!1),o.Am.success("".concat(e," moved successfully!"),{id:t}),null==b||b()}catch(n){var l;let e=(null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.error)||(null==n?void 0:n.message)||"Failed to move ".concat(m);o.Am.error(e,{id:t})}finally{F(!1)}};if(!d&&(!u||0===u.length))return null;let I=!p||0===p.children.length;return(0,n.jsx)(c.Vq,{open:E,onOpenChange:e=>{_(e),e||C(void 0)},children:(0,n.jsxs)(c.cZ,{className:"max-w-3xl!",children:[(0,n.jsxs)(c.a7,{children:[(0,n.jsx)(c.fK,{children:(0,n.jsxs)(c.$N,{className:"flex items-center gap-2",children:[(0,n.jsx)(s.Z,{className:"size-5"}),(()=>{if(k){let e=f||"".concat(m,"s");return"Move ".concat(S," ").concat(1===S?m:e," to Folder")}return d?'Move "'.concat(x(d),'" to Folder'):"Move ".concat(m," to Folder")})()]})}),(0,n.jsx)(T,{rootName:g,folderTree:p,selectedFolderId:y,onSelectFolder:C,currentFolderId:z,isLoading:v,emptyMessage:"No folders found",emptyDescription:"Create a folder first to organize your ".concat(f||"".concat(m,"s"))})]}),(0,n.jsxs)(c.cN,{className:"flex items-center justify-between",children:[(0,n.jsx)(c.GG,{asChild:!0,children:(0,n.jsx)(a.zx,{type:"button",variant:"ghost",disabled:w,children:"Cancel"})}),(0,n.jsx)(a.zx,{onClick:Z,disabled:void 0===y||w||I,children:w?"Moving...":"Move"})]})]})})}},92437:function(e,t,l){l.d(t,{E:function(){return c},m:function(){return i}});var n=l(85893),r=l(67294),s=l(37918),o=l(70162),a=l(18998);let c=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,n.jsx)(s.fC,{className:(0,a.cn)("grid gap-2",l),...r,ref:t})});c.displayName=s.fC.displayName;let i=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,n.jsx)(s.ck,{ref:t,className:(0,a.cn)("border-accent-foreground text-accent-foreground focus-visible:ring-ring aspect-square h-4 w-4 rounded-full border shadow focus:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",l),...r,children:(0,n.jsx)(s.z$,{className:"flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"fill-accent-foreground h-3.5 w-3.5"})})})});i.displayName=s.ck.displayName},69307:function(e,t,l){l.d(t,{O:function(){return u}});var n=l(85893),r=l(26824),s=l(67294),o=l(50039),a=l(62190),c=l(71424),i=l(42414);let d=(e,t,l)=>{switch(e){case r.C.APPROVED:return l?{variant:"accent",tooltip:"".concat(t?"Your":"This"," template is published to community templates"),content:"Community Template"}:{variant:"pink",tooltip:"".concat(t?"Your":"This"," template is submitted to the template gallery"),content:t?"Your Template":"Template"};case r.C.SUBMITTED:return{variant:"warning",Icon:o.Z,tooltip:"Template submission pending for ".concat(l?"community templates":"template gallery",", please wait for approval"),content:"Submitted"};case r.C.DRAFT:return{variant:"muted",tooltip:"Template has not been submitted, but viewers can still see setup instructions",content:"Draft Template"};case r.C.REJECTED:return{variant:"destructive",Icon:a.Z,tooltip:"Template submission rejected from ".concat(l?"community templates":"template gallery",", try submitting again!"),content:"Template Rejected"};case r.C.DEPRECATED:return{variant:"destructive",Icon:a.Z,tooltip:"Template has been archived and is no longer available in ".concat(l?"community templates":"template gallery"),content:"Template Archived"};case r.C.CHANGES_REQUESTED:return{variant:"warning",Icon:o.Z,tooltip:"Template submission has been reviewed and changes are requested to publish to ".concat(l?"community templates":"template gallery"),content:"Changes Requested"};default:return{variant:"muted",tooltip:"Template has not been submitted, but viewers can still see setup instructions",content:"Draft Template"}}},u=e=>{let{status:t,isCreator:l,isMarketplaceTemplate:r}=e,{variant:o,Icon:a,tooltip:u,content:m}=(0,s.useMemo)(()=>d(t,l,r),[t,l,r]);return(0,n.jsxs)(i.u,{children:[(0,n.jsx)(i.aJ,{children:(0,n.jsxs)(c.C,{variant:o,size:"sm",children:[a&&(0,n.jsx)(a,{className:"size-4"}),m]})}),(0,n.jsx)(i._v,{children:u})]})}},26659:function(e,t,l){l.d(t,{X:function(){return s}});var n=l(67294),r=l(69386);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{searchKeys:[]},[l,s]=(0,n.useState)(""),{searchKeys:o,threshold:a=.2,ignoreLocation:c=!0}=t,i=(0,n.useMemo)(()=>new r.Z(e,{keys:o,threshold:a,ignoreLocation:c}),[e,o,a,c]),d=(0,n.useMemo)(()=>l?i.search(l).map(e=>e.item):e,[i,e,l]),u=(0,n.useMemo)(()=>0===d.length,[d]);return[l,s,d,u]}}}]);