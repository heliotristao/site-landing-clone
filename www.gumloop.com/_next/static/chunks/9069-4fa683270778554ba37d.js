(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9069],{66682:function(e,n,t){"use strict";var s=t(85893),l=t(67294),a=t(18998);n.Z=e=>{let{title:n,description:t,children:o,className:r}=e;return(0,s.jsxs)("div",{className:(0,a.cn)("flex w-full flex-col gap-3.5 md:flex-row",r),children:[(0,s.jsxs)("div",{className:"flex max-w-full flex-grow flex-col gap-0.5",children:[(0,s.jsx)("h5",{className:"text-foreground text-lg font-medium md:text-xl",children:n}),t&&("string"==typeof t?(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:t}):t)]}),o&&(0,s.jsx)(l.Fragment,{children:o})]})}},2689:function(e,n,t){"use strict";var s=t(85893);t(67294);var l=t(18998);n.Z=e=>{let{title:n,description:t,route:a,children:o,className:r,titleClassName:i}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col items-start gap-4 md:flex-row md:items-center",r),children:(0,s.jsxs)("div",{className:"flex w-full flex-col gap-0.5 overflow-hidden",children:[a&&(0,s.jsx)("div",{className:"text-muted-foreground text-xs font-medium tracking-wider uppercase",children:a}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["string"==typeof n?(0,s.jsx)("h1",{className:(0,l.cn)("text-foreground truncate text-xl font-semibold md:text-2xl",i),children:n}):n,o]}),t&&("string"==typeof t?(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:t}):t)]})})}},92437:function(e,n,t){"use strict";t.d(n,{E:function(){return i},m:function(){return c}});var s=t(85893),l=t(67294),a=t(37918),o=t(70162),r=t(18998);let i=l.forwardRef((e,n)=>{let{className:t,...l}=e;return(0,s.jsx)(a.fC,{className:(0,r.cn)("grid gap-2",t),...l,ref:n})});i.displayName=a.fC.displayName;let c=l.forwardRef((e,n)=>{let{className:t,...l}=e;return(0,s.jsx)(a.ck,{ref:n,className:(0,r.cn)("border-accent-foreground text-accent-foreground focus-visible:ring-ring aspect-square h-4 w-4 rounded-full border shadow focus:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:(0,s.jsx)(a.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"fill-accent-foreground h-3.5 w-3.5"})})})});c.displayName=a.ck.displayName},35607:function(e,n,t){"use strict";t.d(n,{V:function(){return _}});var s=t(85893),l=t(67294),a=t(78865),o=t(18289),r=t(71707),i=t(41664),c=t.n(i),d=t(87536),u=t(29876),m=t(7161),p=t(14142),x=t(22455),h=t(90273);let f=x.ZP.find(e=>"custom_slack_app"===e.secret_type),g=(e,n,t)=>{var s;return{display_information:{name:e,description:t,background_color:"#2c2d30"},features:{bot_user:{display_name:n,always_online:!0}},oauth_config:{redirect_urls:[h.JL+"/auth/callback"],scopes:{bot:null!==(s=null==f?void 0:f.default_scopes)&&void 0!==s?s:[]}},settings:{event_subscriptions:{request_url:h.CT+"/api/v1/external/slack/events",bot_events:["app_mention","message.channels","message.groups","message.im"]},org_deploy_enabled:!1,socket_mode_enabled:!1,token_rotation_enabled:!1}}},v=e=>{let{number:n}=e;return(0,s.jsx)("div",{className:"bg-muted text-primary grid size-6 shrink-0 place-items-center rounded-full font-mono text-xs font-semibold",children:n})};n.Z=()=>{let{watch:e}=(0,d.Gc)(),[n,t,a]=e(["appName","appTag","appDescription"]),o=(0,l.useMemo)(()=>JSON.stringify(g(n||"GumBot",t||"GumBot",a||"".concat(n," is a Slack app that allows you to interact with your Gumloop agent.")),null,2),[n,t,a]);return(0,s.jsx)(_,{slackManifestJson:o})};let j=JSON.stringify(g("Gumloop Bot","GumloopBot","A custom Slack app for Gumloop"),null,2),_=e=>{let{slackManifestJson:n=j}=e,{isCopied:t,handleCopyText:i}=(0,p.Z)(n),d=[{title:"Copy the Slack manifest JSON",description:"The manifest is a JSON file that contains the configuration for your Slack app",children:(0,s.jsxs)(u.zx,{variant:"tertiary",size:"xs",onClick:i,children:[t?(0,s.jsx)(a.Z,{}):(0,s.jsx)(o.Z,{}),t?"Copied":"Copy"]})},{title:"Create a new Slack app",description:'1. Go to api.slack.com/apps \n2. Click on "Create New App" \n3. Choose the "From an app manifest" option',children:(0,s.jsx)(u.zx,{variant:"outline",size:"xs",asChild:!0,children:(0,s.jsxs)(c(),{href:"https://api.slack.com/apps",target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(r.Z,{}),"Open"]})})},{title:"Paste the Slack manifest JSON",description:"After selecting your workspace, then paste the manifest JSON into the editor"},{title:"Follow the remaining setup instructions on Slack",description:"Follow the remaining setup instructions on Slack to complete the installation"},{title:'Return to this page and click on "Next"',description:'Return to this page and click on "Next" to continue with the setup process'}];return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsxs)(m.fK,{children:[(0,s.jsx)(m.$N,{children:"Setup Guide"}),(0,s.jsx)(m.Be,{children:"Follow these instructions to create a custom Slack App"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:d.map((e,n)=>(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(v,{number:n+1}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-0.5",children:[(0,s.jsx)("span",{className:"text-base font-medium",children:e.title}),(0,s.jsx)("span",{className:"text-muted-foreground text-sm whitespace-pre-wrap",children:e.description})]}),null==e?void 0:e.children]},n))})]})}},43526:function(e,n,t){"use strict";var s=t(85893);t(67294);var l=t(52542),a=t(65329),o=t(18998);n.Z=e=>{let{warnings:n,hasBannerAbove:t,fullRounded:r=!1}=e;return n.length?(0,s.jsx)("div",{className:(0,o.cn)("mx-1 mt-1",t?"mb-1":""),children:(0,s.jsx)(a.bZ,{className:(0,o.cn)("bg-warning/50 dark:bg-warning/75 flex flex-col gap-2.5 border-none pr-2",r?"rounded-[0.85rem]":"rounded-b-none",!r&&(t?"rounded-t-none":"rounded-t-[0.85rem]")),children:(0,s.jsxs)("div",{className:"text-warning-foreground dark:text-foreground flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"shrink-0 !stroke-[2]",size:20}),(0,s.jsx)(a.Cd,{className:"text-sm font-semibold",children:"Important Notice"})]}),(0,s.jsx)(a.X,{className:"text-warning-foreground dark:text-foreground text-sm",children:n.map((e,n)=>(0,s.jsx)("div",{className:(0,o.cn)(n>0&&"mt-2"),children:e},n))})]})})}):null}},80755:function(e,n,t){"use strict";t.d(n,{nl:function(){return F},s2:function(){return E},p7:function(){return H},FN:function(){return M},L0:function(){return U},LX:function(){return D},Ye:function(){return J},is:function(){return K},PC:function(){return V}});var s=t(85893),l=t(45788),a=t(67294),o=t(23432),r=t(41949),i=t(78865),c=t(92385),d=t(28900),u=t(93461),m=t(15928),p=t(43832),x=t(29871),h=t(21612),f=t(73935),g=t(64712),v=t(29876),j=t(42414),_=t(87900),y=t(35718),b=t(7161),N=t(77118),w=t(22455);let C={reddit_oauth_config:'\n    Before adding credentials, create an OAuth app in Reddit:\n    <br /><br />\n    <ol class="list-decimal list-inside text-left space-y-2">\n      <li>Go to <a href="https://www.reddit.com/prefs/apps" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Reddit App Preferences</a></li>\n      <li>Click "create another app..." at the bottom</li>\n      <li>Select "web app" as the app type</li>\n      <li>Set redirect URL to: <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://api.gumloop.com/auth/callback</code></li>\n      <li>Copy the Client ID (under the app name) and Client Secret</li>\n    </ol>\n  ',reddit_access_token:"\n    <strong>Before you begin:</strong> You need to set up <strong>Reddit OAuth Config</strong> first with your OAuth app credentials.\n    <br /><br />\n    This includes your Client ID and Client Secret from your Reddit app.\n  ",monday_access_token:'\n    To connect your Monday.com account, please follow these steps:\n    <br /><br />\n    <ol class="list-decimal list-inside text-left">\n      <li>Click the "Install App" button below to install Gumloop on your Monday.com workspace (unless you have done so already)</li>\n      <li>After installation, click "Add credential" to complete the authentication</li>\n      <li>You will be redirected back to Gumloop once the process is complete</li>\n    </ol>\n  ',salesforce_access_token:'\n    As of <a href="https://help.salesforce.com/s/articleView?id=005132365&type=1" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">September 2025</a>, administrators need to pre-install the Gumloop application so that users can connect to the instance.\n    <br /><br />\n    Please make sure these settings are configured prior to adding the Salesforce credentials. Contact Gumloop Support for details.\n  ',netsuite_oauth_config:'\n    Before adding credentials, create an OAuth integration in NetSuite:\n    <br /><br />\n    <ol class="list-decimal list-inside text-left space-y-2">\n      <li>Follow the <a href="https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_157771733782.html" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">NetSuite OAuth 2.0 Setup Guide</a> to get your Client ID and Client Secret</li>\n      <li>Enable scopes: <code class="bg-gray-100 px-1 rounded">restlets</code>, <code class="bg-gray-100 px-1 rounded">rest_webservices</code></li>\n      <li>Set redirect URL to: <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://api.gumloop.com/auth/callback</code></li>\n    </ol>\n  ',okta_oauth_config:'\n    Before adding credentials, create an OAuth application in Okta:\n    <br /><br />\n    <ol class="list-decimal list-inside text-left space-y-2">\n      <li>Follow the <a href="https://developer.okta.com/docs/guides/implement-oauth-for-okta/main/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Okta OAuth 2.0 Guide</a> to create an app integration</li>\n      <li>You\'ll need: <strong>Okta Domain</strong>, <strong>Authorization Server ID</strong>, <strong>Client ID</strong>, and <strong>Client Secret</strong></li>\n      <li>Set redirect URL to: <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://api.gumloop.com/auth/callback</code></li>\n    </ol>\n  ',snowflake_oauth_config:'\n    Before adding credentials, create an OAuth integration in Snowflake:\n    <br /><br />\n    <ol class="list-decimal list-inside text-left space-y-2">\n      <li>Follow the <a href="https://docs.snowflake.com/en/user-guide/oauth-custom" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Snowflake OAuth 2.0 Guide</a> to create a security integration</li>\n      <li>You\'ll need: <strong>Account Identifier</strong>, <strong>Client ID</strong>, and <strong>Client Secret</strong></li>\n      <li>Set redirect URL to: <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://api.gumloop.com/auth/callback</code></li>\n    </ol>\n  ',snowflake_access_token:'\n    <strong>Important:</strong> Snowflake now enforces <a href="https://docs.snowflake.com/en/user-guide/security-mfa" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">MFA for passwords</a>, so we support OAuth-based authentication.\n    <br /><br />\n    You need to set up either <strong>Okta OAuth Config</strong> or <strong>Snowflake OAuth Config</strong> first before connecting.\n  ',netsuite_access_token:"\n    <strong>Before you begin:</strong> You need to set up <strong>NetSuite OAuth Config</strong> first with your OAuth integration credentials.\n    <br /><br />\n    This includes your Client ID and Client Secret from your NetSuite OAuth integration.\n  ",databricks_oauth_config:'\n    Before adding credentials, create an OAuth app in your Databricks account:\n    <br /><br />\n    <ol class="list-decimal list-inside text-left space-y-2">\n      <li>Go to your <a href="https://accounts.cloud.databricks.com" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Databricks Account Console</a></li>\n      <li>Navigate to <strong>Settings</strong> → <strong>App connections</strong></li>\n      <li>Click <strong>Add connection</strong></li>\n      <li>Set redirect URL to: <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://api.gumloop.com/auth/callback</code></li>\n      <li>Select access scopes: <code class="bg-gray-100 px-1 rounded">All APIs</code></li>\n      <li>Check "Generate a client secret"</li>\n      <li>Copy the Client ID and Client Secret (secret won\'t be shown again)</li>\n    </ol>\n  ',databricks_access_token:"\n    <strong>Before you begin:</strong> You need to set up <strong>Databricks OAuth Config</strong> first with your OAuth app credentials.\n    <br /><br />\n    This includes your Client ID and Client Secret from your Databricks OAuth app.\n  ",tableau_credentials:'\n    To connect Tableau, you need a Personal Access Token (PAT):\n    <br /><br />\n    <ol class="list-decimal list-inside text-left space-y-2">\n      <li>Sign in to your Tableau Server or Tableau Cloud</li>\n      <li>Go to <strong>My Account Settings</strong></li>\n      <li>Under <strong>Personal Access Tokens</strong>, create a new token</li>\n      <li>Copy the token name and secret value immediately (it won\'t be shown again)</li>\n    </ol>\n    <br />\n    For detailed instructions, see the <a href="https://help.tableau.com/current/server/en-us/security_personal_access_tokens.htm" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Tableau PAT documentation</a>.\n  ',custom_slack_app:t(35607).V};var k=t(45837),S=t(45881),z=t(94750),A=t(16538),O=t(27801),Z=t(92437),I=t(61857),P=t(18998),L=e=>{var n,t;let{open:o,setOpen:r,secretDeclaration:i,project:c,organization:d,onSelect:u,isLoadingConfig:m}=e,{userProfile:p,idTokenRef:x}=(0,k.H)(),[h,f]=(0,a.useState)(""),{data:g,isLoading:j}=(0,l.jL)({userProfile:p,idToken:x.current,projectId:null==c?void 0:c.project_id,organizationId:null==d?void 0:d.organization_id},{skip:!o}),{data:_}=(0,l.jL)({userProfile:p,idToken:x.current,organizationId:null===(n=p.organization)||void 0===n?void 0:n.organization_id},{skip:!o||!(null===(t=p.organization)||void 0===t?void 0:t.organization_id)||!!d}),y=(0,a.useMemo)(()=>(i.supported_oauth_configs||[]).map(e=>{let n=w.ZP.find(n=>n.secret_type===e),t=(null==g?void 0:g.some(n=>n.secret_type===e))||(null==_?void 0:_.some(n=>n.secret_type===e));return{type:e,name:(null==n?void 0:n.secret_name)||e,imagePath:(null==n?void 0:n.image_path)||"",isAvailable:t||!1}}).sort((e,n)=>(n.isAvailable?1:0)-(e.isAvailable?1:0)),[i.supported_oauth_configs,g,_]);return(0,a.useEffect)(()=>{if(o&&!j&&y.length>0&&!h){let e=y.find(e=>e.isAvailable);e&&f(e.type)}},[o,j,y,h]),(0,a.useEffect)(()=>{o||f("")},[o]),(0,s.jsx)(b.Vq,{open:o,onOpenChange:r,children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsxs)(b.a7,{children:[(0,s.jsxs)(b.fK,{children:[(0,s.jsx)(b.$N,{children:"Select OAuth Configuration"}),(0,s.jsxs)(b.Be,{children:["Choose which OAuth configuration to use for ",i.secret_name,"."]})]}),j?(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Array.from({length:2}).map((e,n)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-md border p-4",children:[(0,s.jsx)(I.O,{className:"h-10 w-10 rounded"}),(0,s.jsx)(I.O,{className:"h-5 flex-grow"}),(0,s.jsx)(I.O,{className:"h-4 w-4 rounded-full"})]},n))}):(0,s.jsx)(Z.E,{className:"flex flex-col gap-0",value:h,onValueChange:f,children:y.map((e,n)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:e.type,className:(0,P.cn)("flex cursor-pointer items-center gap-3 rounded-md border p-4",h===e.type&&"border-accent-foreground bg-accent",!e.isAvailable&&"cursor-not-allowed opacity-50"),children:[e.imagePath&&(0,s.jsx)("img",{src:e.imagePath,alt:e.name,className:"h-10 w-10 rounded object-contain"}),(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name}),!e.isAvailable&&(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Configuration not set up"})]}),(0,s.jsx)(Z.m,{value:e.type,id:e.type,disabled:!e.isAvailable})]}),n<y.length-1&&(0,s.jsxs)("div",{className:"flex flex-grow items-center gap-1.5 py-4",children:[(0,s.jsx)("div",{className:"bg-border flex h-[1px] flex-grow"}),(0,s.jsx)("span",{className:"text-muted-foreground text-sm font-medium",children:"OR"}),(0,s.jsx)("div",{className:"bg-border flex h-[1px] flex-grow"})]})]},e.type))})]}),(0,s.jsxs)(b.cN,{children:[(0,s.jsx)(b.GG,{asChild:!0,children:(0,s.jsx)(v.zx,{variant:"outline",disabled:m,children:"Cancel"})}),(0,s.jsx)(v.zx,{onClick:()=>{h&&u(h)},disabled:!h||j,loading:m,children:m?"Loading configuration...":"Continue"})]})]})})},T=t(97827);let D=e=>{let{secretDeclaration:n,project:t,organization:l,className:r,onAddAccount:i,disabled:c,...d}=e,{handleAuthentication:u}=(0,N.C)({secretDeclaration:n,projectId:null==t?void 0:t.project_id,organizationId:null==l?void 0:l.organization_id,onAddAccount:()=>{h(!1),null==i||i()}}),[m,p]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),{userProfile:f}=(0,k.H)(),g=async e=>{h(!0),await u(void 0,void 0,e),p(!1)};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)(v.zx,{variant:"outline",className:"".concat(r),onClick:()=>{p(!0)},disabled:c||x,...d,children:[x&&(0,s.jsx)(o.Z,{className:"animate-spin"}),(0,s.jsx)("span",{className:"text-nowrap",children:x?"Waiting for authentication...":"Connect"})]}),(0,s.jsx)(T.Z,{open:m,setOpen:p,selectedSecretDeclaration:n,givePermissionOverrideFunction:g,groupId:null==f?void 0:f.group_id})]})},E=e=>{let{secretDeclaration:n,project:t,organization:l,className:o,onAddAccount:r,...i}=e,{handleAuthentication:c}=(0,N.C)({secretDeclaration:n,projectId:null==t?void 0:t.project_id,organizationId:null==l?void 0:l.organization_id,onAddAccount:r}),[d,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),{userProfile:f}=(0,k.H)(),j=async e=>{if(!x){g.Am.error("Please enter a custom subdomain");return}await c(x,void 0,e),p(!1),u(!1),h("")};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(v.zx,{variant:"outline",className:"text-nowrap ".concat(o),onClick:()=>p(!0),...i,children:"Connect"}),(0,s.jsx)(R,{open:m,setOpen:p,secretDeclaration:n,customSubdomain:x,setCustomSubdomain:h,onContinue:()=>u(!0)}),(0,s.jsx)(T.Z,{open:d,setOpen:u,selectedSecretDeclaration:n,givePermissionOverrideFunction:j,groupId:null==f?void 0:f.group_id})]})},M=e=>{var n;let{secretDeclaration:t,project:l,organization:r,className:i,onAddAccount:c,...d}=e,[u,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[j,_]=(0,a.useState)(!1),[y,b]=(0,a.useState)(""),[C,k]=(0,a.useState)(!1),[S,z]=(0,a.useState)(!1),[A,O]=(0,a.useState)(t.metadata),{handleAuthentication:Z,setSelectedOAuthConfigType:I,isLoadingOAuthConfig:P}=(0,N.C)({secretDeclaration:t,projectId:null==l?void 0:l.project_id,organizationId:null==r?void 0:r.organization_id,onAddAccount:()=>{x(!1),f(!1),k(!1),z(!1),null==c||c()}}),T=null!==(n=t.supported_oauth_configs)&&void 0!==n?n:[],D=T.length>1,E=T[0],[M,F]=(0,a.useState)(E);(0,a.useEffect)(()=>{E&&(I(E),F(E))},[E,I]);let U=(e,n)=>{O(t=>null==t?void 0:t.map(t=>t.name===n?{...t,value:e}:t))},K=async()=>{if(t.has_custom_subdomain&&!y){g.Am.error("Please enter a custom subdomain");return}let e=M?w.ZP.find(e=>e.secret_type===M):void 0,n=(null==e?void 0:e.default_scopes)||t.default_scopes||[];k(!0),await Z(t.has_custom_subdomain?y:void 0,void 0,n,A),f(!1),b("")};(0,a.useEffect)(()=>{(async()=>{if(S&&!P){if(z(!1),x(!1),await new Promise(e=>setTimeout(e,100)),t.has_custom_subdomain)f(!0);else{let e=M?w.ZP.find(e=>e.secret_type===M):void 0,n=(null==e?void 0:e.default_scopes)||[];k(!0),await Z(void 0,void 0,n,A)}}})()},[S,P,t.has_custom_subdomain,M,Z,A]);let V=()=>{D?x(!0):t.has_custom_subdomain?f(!0):t.has_metadata&&!t.has_custom_subdomain?_(!0):K()};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)(v.zx,{variant:"outline",className:"text-nowrap ".concat(i),onClick:()=>{t.isInstructional?m(!0):V()},disabled:C,...d,children:[C&&(0,s.jsx)(o.Z,{className:"animate-spin"}),(0,s.jsx)("span",{className:"text-nowrap",children:C?"Waiting for authentication...":"Connect"})]}),t.isInstructional&&(0,s.jsx)(q,{open:u,setOpen:m,secretDeclaration:t,onContinue:()=>{m(!1),V()}}),(0,s.jsx)(L,{open:p,setOpen:x,secretDeclaration:t,project:l,organization:r,onSelect:e=>{w.ZP.find(n=>n.secret_type===e)&&(F(e),I(e),z(!0))},isLoadingConfig:S}),t.has_custom_subdomain&&(0,s.jsx)(R,{open:h,setOpen:f,secretDeclaration:t,customSubdomain:y,setCustomSubdomain:b,metadata:A,handleMetadataChange:U,onContinue:()=>K()}),t.has_metadata&&!t.has_custom_subdomain&&(0,s.jsx)(G,{open:j,setOpen:_,secretDeclaration:t,metadata:A,handleMetadataChange:U,onContinue:()=>K()})]})},G=e=>{let{open:n,setOpen:t,secretDeclaration:l,metadata:a,handleMetadataChange:o,onContinue:r}=e;return(0,s.jsx)(b.Vq,{open:n,onOpenChange:e=>t(e),children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsxs)(b.a7,{children:[(0,s.jsxs)(b.fK,{children:[(0,s.jsxs)(b.$N,{className:"text-lg font-semibold",children:["Configure ",l.secret_name]}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:l.description})]}),(0,s.jsx)("div",{className:"flex w-full flex-col gap-4",children:a&&o&&(0,s.jsx)(V,{metadata:a,handleMetadataChange:o,showSecret:!1})})]}),(0,s.jsxs)(b.cN,{children:[(0,s.jsx)(v.zx,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,s.jsx)(v.zx,{onClick:()=>{let e=null==a?void 0:a.find(e=>!e.isSecret&&!e.value);if(e){g.Am.error("Please enter ".concat(e.name));return}t(!1),r()},children:"Continue"})]})]})})},q=e=>{let{open:n,setOpen:t,secretDeclaration:l,onContinue:o}=e,r=C[l.secret_type],i="function"==typeof r;return(0,s.jsx)(b.Vq,{open:n,onOpenChange:t,children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsx)(b.a7,{children:i?a.createElement(r):(0,s.jsx)(a.Fragment,{children:(0,s.jsxs)(b.fK,{children:[(0,s.jsx)(b.$N,{className:"text-lg font-semibold",children:l.secret_name}),(0,s.jsx)(b.Be,{children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,A.bb)(r||"")}})})]})})}),(0,s.jsxs)(b.cN,{children:[l.installAppLink&&(0,s.jsx)(v.zx,{variant:"outline",className:"text-sm text-nowrap",onClick:()=>window.open(l.installAppLink,"_blank","noopener,noreferrer"),children:"Install App"}),(0,s.jsx)(v.zx,{className:"text-sm text-nowrap",onClick:o,variant:"tertiary",children:"Connect"})]})]})})},R=e=>{var n;let{open:t,setOpen:l,secretDeclaration:a,customSubdomain:o,setCustomSubdomain:r,metadata:i,handleMetadataChange:c,onContinue:d}=e;return(0,s.jsx)(b.Vq,{open:t,onOpenChange:e=>l(e),children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsxs)(b.a7,{children:[(0,s.jsx)(b.fK,{children:(0,s.jsxs)(b.$N,{className:"text-lg font-semibold",children:["Add new account for ",a.secret_name]})}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsx)("label",{htmlFor:"customDomainName",className:"text-muted-foreground text-sm font-medium",children:a.requires_full_url?"Your workspace URL":"Your workspace name"}),a.requires_full_url?(0,s.jsx)(_.I,{className:"h-10",value:o,placeholder:a.custom_subdomain_placeholder||"https://example.com",onChange:e=>r(e.target.value),type:"text",spellCheck:"false"}):(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex w-full items-center",children:[(0,s.jsx)(_.I,{className:"h-10 rounded-r-none",value:o,placeholder:"gumloop",onChange:e=>r(e.target.value),type:"text",spellCheck:"false"}),(0,s.jsxs)("span",{className:"border-border text-muted-foreground bg-muted flex h-10 items-center justify-center rounded-r border border-l-0 px-3 text-sm",children:[".",a.custom_subdomain_placeholder||(null===(n=a.secret_name)||void 0===n?void 0:n.toLowerCase())||""]})]})}),a.has_metadata&&i&&c&&(0,s.jsx)(V,{metadata:i,handleMetadataChange:c,showSecret:!1})]})]}),(0,s.jsx)(b.cN,{children:(0,s.jsx)(v.zx,{onClick:()=>{if(!o){g.Am.error("Please enter a custom subdomain");return}l(!1),d(o)},children:"Connect"})})]})})},F=e=>{let{secretDeclaration:n,project:t,organization:l,className:o,onAddAccount:r,...i}=e,[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[j,_]=(0,a.useState)(!1),{userProfile:y}=(0,k.H)(),{handleAuthentication:b}=(0,N.C)({secretDeclaration:n,projectId:null==t?void 0:t.project_id,organizationId:null==l?void 0:l.organization_id,onAddAccount:()=>{d(!1),m(!1),null==r||r()}}),w=async e=>{if(n.has_custom_subdomain&&!h){g.Am.error("Please enter a custom subdomain");return}_(!0),await b(n.has_custom_subdomain?h:void 0,void 0,e),x(!1),m(!1),f("")};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(v.zx,{variant:"outline",className:"text-nowrap ".concat(o),onClick:()=>d(!0),...i,children:"Connect"}),(0,s.jsx)(q,{open:c,setOpen:d,secretDeclaration:n,onContinue:()=>{d(!1),n.has_custom_subdomain?m(!0):x(!0)}}),n.has_custom_subdomain&&(0,s.jsx)(R,{open:u,setOpen:m,secretDeclaration:n,customSubdomain:h,setCustomSubdomain:f,onContinue:()=>x(!0)}),(0,s.jsx)(T.Z,{open:p,setOpen:x,selectedSecretDeclaration:n,givePermissionOverrideFunction:w,groupId:null==y?void 0:y.group_id})]})},U=e=>(0,s.jsx)(B,{...e}),K=e=>(0,s.jsx)(B,{...e}),V=e=>{let{metadata:n,handleMetadataChange:t,showSecret:l}=e;return n?(0,s.jsx)(a.Fragment,{children:n.filter(e=>!(null==e?void 0:e.isHidden)).map((e,n)=>(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("label",{htmlFor:e.name,className:"text-muted-foreground block text-sm font-medium",children:[e.name,!e.isOptional&&(0,s.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]}),e.description&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:e.description}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsx)(_.I,{id:e.name,value:e.value,placeholder:e.placeholder||"",onChange:n=>t(n.target.value,e.name),type:e.isSecret&&!l?"password":"text",spellCheck:"false",required:!e.isOptional,autoComplete:"off"})})})]},e.name+n))}):null},B=e=>{let{secretDeclaration:n,project:t,organization:c,className:d,secretId:u,onAddAccount:f,...y}=e,{userProfile:N,idTokenRef:w}=(0,a.useContext)(k.f),[C,{isLoading:S}]=(0,l.Ve)(),[z,{isLoading:A}]=(0,l.OG)(),[Z,I]=(0,a.useState)(!1),[P,L]=(0,a.useState)(!1),T=!!u,D=n.isInstructional&&!T,{data:E,isLoading:M}=(0,l.Ci)({secretId:u,secretType:n.secret_type,userProfile:N,idToken:w.current,projectId:null==t?void 0:t.project_id,organizationId:null==c?void 0:c.organization_id},{skip:!(Z&&T)}),[G,R]=(0,a.useState)(""),[F,U]=(0,a.useState)(n.metadata),[K,B]=(0,a.useState)(!1),J="agenthub_api_key"===n.secret_type||"gumcp_api_key"===n.secret_type;(0,a.useEffect)(()=>{if(M)return;let e=n.metadata||[];if(E)try{let n=JSON.parse(E);n.value&&R(n.value),n.metadata?U((0,O.xd)(e,n.metadata)):U(e)}catch(n){if(n instanceof SyntaxError){if("string"==typeof E)R(E),U(e);else{R((null==E?void 0:E.value)||"");let n=null==E?void 0:E.metadata;U((0,O.xd)(e,n))}}else throw n}else U(e)},[E,n.metadata,n.secret_name,M]);let H=async()=>{!T&&J?$((0,O.NV)()):D?L(!0):I(!0)},Y=async()=>{if(!u)return;let e=(0,O.NV)();R(e),await z({secretId:u,value:e,projectId:null==t?void 0:t.project_id,organizationId:null==c?void 0:c.organization_id,userProfile:N,idToken:w.current})},$=async(e,s)=>{if(s){let e=s.filter(e=>!e.isOptional&&!e.value.trim());if(e.length>0){g.Am.error("Please fill in required field(s): ".concat(e.map(e=>e.name).join(", ")));return}for(let e of s)if(e.validate&&e.value){let n=e.validate(e.value);if(!n.valid){g.Am.error(n.errorMessage||"Invalid value for ".concat(e.name));return}}}if(!e.trim()&&(!s||s.every(e=>!e.value.trim()))){g.Am.error("Please enter a value");return}if(T)await z({secretId:u,value:e,metadata:s,projectId:null==t?void 0:t.project_id,organizationId:null==c?void 0:c.organization_id,userProfile:N,idToken:w.current});else{let l={secret_type:n.secret_type,project_id:null==t?void 0:t.project_id,organization_id:null==c?void 0:c.organization_id,value:e,metadata:s};if("error"in await C({secret:l,userProfile:N,idToken:w.current,projectId:null==t?void 0:t.project_id,organizationId:null==c?void 0:c.organization_id})){g.Am.error("Failed to add credential");return}g.Am.success(J?"Successfully generated new Gumloop API key!":"Successfully added new account for ".concat(n.secret_name,"!")),R(""),U(n.metadata),null==f||f()}I(!1)};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)(v.zx,{variant:"outline",className:"text-nowrap ".concat(d),onClick:H,...y,children:[u&&(0,s.jsx)(r.Z,{className:"mr-0.5 h-4 w-4"}),u?"Edit":J?"Generate key":"Connect"]}),D&&(0,s.jsx)(q,{open:P,setOpen:L,secretDeclaration:n,onContinue:()=>{L(!1),I(!0)}}),(0,s.jsx)(b.Vq,{open:Z,onOpenChange:e=>I(e),children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsxs)(b.a7,{children:[(0,s.jsx)(b.fK,{children:(0,s.jsx)(b.$N,{className:"text-lg font-semibold",children:n.secret_name})}),!n.noApiKey&&(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsx)("label",{htmlFor:"apiKey",className:"text-muted-foreground block text-sm font-medium",children:"API Key"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(_.I,{id:"apiKey",className:"h-15 ".concat(T?"pr-8":""," ").concat(J?"bg-gray-300":""),value:G,onChange:e=>R(e.target.value),type:K?"text":"password",spellCheck:"false",disabled:J||M}),T&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,s.jsx)(v.zx,{variant:"ghost",onClick:()=>{navigator.clipboard.writeText(G),g.Am.success("Copied to clipboard!")},children:M?(0,s.jsx)(o.Z,{className:"animate-spin"}):(0,s.jsx)(h.Z,{className:"h-5 w-5"})})})]}),J&&(0,s.jsxs)(j.u,{children:[(0,s.jsx)(j.aJ,{asChild:!0,children:(0,s.jsx)(v.zx,{variant:"ghost",size:"icon",onClick:Y,disabled:M,children:(0,s.jsx)(x.Z,{className:"text-muted-foreground"})})}),(0,s.jsx)(j._v,{children:"Regenerate key"})]})]}),!J&&(0,s.jsxs)("div",{className:"text-muted-foreground",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Example value:"}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:n.example_value})]})]}),n.has_metadata&&F&&(0,s.jsx)(V,{metadata:F,handleMetadataChange:(e,n)=>{U(t=>null==t?void 0:t.map(t=>t.name===n?{...t,value:e}:t))},showSecret:K})]}),(0,s.jsxs)(b.cN,{className:"flex items-center",children:[(0,s.jsxs)(v.zx,{variant:"outline",onClick:()=>B(e=>!e),children:[K?(0,s.jsx)(p.Z,{className:"h-4 w-4"}):(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:K?"Hide":"Show"})]}),(0,s.jsxs)(v.zx,{onClick:()=>$(G,F),disabled:S||A,children:[S||A?(0,s.jsx)(o.Z,{className:"animate-spin"}):(0,s.jsx)(i.Z,{}),(0,s.jsx)("span",{children:"Save"})]})]})]})})]})},J=e=>{let{secretType:n,secretDeclaration:t,organization:l,disabled:o}=e,{userProfile:r,idTokenRef:i}=(0,a.useContext)(k.f),[m,p]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),[b,N]=(0,a.useState)([]),[w,C]=(0,a.useState)(!1),[A,O]=(0,a.useState)([]),Z=(0,a.useRef)(null);(0,a.useEffect)(()=>(m?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[m]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&m&&p(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m]),(0,a.useEffect)(()=>{m&&(async()=>{C(!0);try{let e=await S.s.getOrganizationAllowedModels(l.organization_id,r,i.current);O(e||[]);let n="".concat(t.secret_type,"_proxy_url"),s="".concat(t.secret_type,"_model_proxy_map"),a=await (0,z.h0)(l,r,i.current,n),o=await (0,z.h0)(l,r,i.current,s);if(a&&h(a),o)try{let e=JSON.parse(o),n=Object.entries(e).map(e=>{let[n,t]=e;return{modelId:n,customValue:t}});N(n)}catch(e){console.error("Error parsing model mapping JSON:",e),N([])}}catch(e){console.error("Error loading proxy settings:",e)}finally{C(!1)}})()},[m,l,t.secret_type,r,i]);let I=async()=>{C(!0);try{let e="".concat(t.secret_type,"_proxy_url"),n="".concat(t.secret_type,"_model_proxy_map"),s=b.reduce((e,n)=>{let{modelId:t,customValue:s}=n;return t&&s&&(e[t]=s),e},{});x&&""!==x.trim()?await (0,z.jG)(l,r,i.current,e,x):await (0,z.ij)(l,r,i.current,e),0===Object.keys(s).length?await (0,z.ij)(l,r,i.current,n):await (0,z.jG)(l,r,i.current,n,JSON.stringify(s)),g.Am.success("Proxy settings saved successfully"),p(!1)}catch(e){g.Am.error("Failed to save proxy settings"),console.error("Error saving proxy settings:",e)}finally{C(!1)}},P=(e,n,t)=>{let s=[...b];s[e][n]=t,N(s)},L=e=>{N(b.filter((n,t)=>t!==e))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v.zx,{variant:"outline",className:"rounded-full",disabled:o,onClick:()=>p(!0),children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Configure Proxy"]}),m&&f.createPortal((0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:e=>{Z.current&&!Z.current.contains(e.target)&&p(!1)},children:(0,s.jsx)("div",{ref:Z,className:"bg-background z-50 max-h-[90vh] w-full max-w-xl rounded-lg shadow-lg",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"flex max-h-[90vh] flex-col overflow-auto p-5",children:[(0,s.jsxs)("div",{className:"mb-5 flex flex-col",children:[(0,s.jsx)("h2",{className:"text-foreground mb-2 text-xl font-bold",children:"Configure AI Proxy"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Set up a proxy URL and model name mappings for this AI service."})]}),w?(0,s.jsx)("div",{className:"my-4 flex justify-center",children:(0,s.jsx)("div",{className:"border-primary h-6 w-6 animate-spin rounded-full border-2 border-t-transparent"})}):(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{htmlFor:"proxyUrl",className:"text-sm font-medium",children:"Proxy URL"}),(0,s.jsx)(_.I,{id:"proxyUrl",type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"https://your-proxy-url.com"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Model Name Mapping"}),(0,s.jsx)("div",{children:(0,s.jsxs)(j.u,{children:[(0,s.jsx)(j.aJ,{asChild:!0,children:(0,s.jsx)(d.Z,{className:"text-muted-foreground size-3 cursor-help"})}),(0,s.jsx)(j._v,{children:(0,s.jsxs)("span",{children:["Map Gumloop model names to your proxy's model names here.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Useful if your proxy uses custom or non-standard model identifiers."]})})]})})]}),(0,s.jsxs)(v.zx,{type:"button",variant:"outline",size:"sm",onClick:()=>{N([...b,{modelId:"",customValue:""}])},className:"flex items-center gap-1 text-xs",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),"Add Mapping"]})]}),0===b.length&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm italic",children:'No mappings defined. Click "Add Mapping" to create one.'}),b.map((e,n)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(y.Z,{value:e.modelId,onChange:e=>P(n,"modelId",e),options:A,label:"Gumloop Model Name"})}),(0,s.jsx)("div",{className:"flex w-48 items-center justify-center self-center px-2",children:(0,s.jsx)("div",{className:"text-muted-foreground mt-6 w-8 text-xl",children:"→"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-muted-foreground mb-1 block text-sm font-medium",children:"Your Model Name"}),(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)(_.I,{type:"text",value:e.customValue,className:"w-32",onChange:e=>P(n,"customValue",e.target.value),placeholder:"your-model"}),(0,s.jsx)(v.zx,{type:"button",variant:"ghost",size:"icon",onClick:()=>L(n),className:"text-muted-foreground group ml-1 h-8 w-8 hover:bg-transparent focus:bg-transparent active:bg-transparent",children:(0,s.jsx)(u.Z,{className:"group-hover:text-destructive h-4 w-4 rotate-45 transition-colors duration-150"})})]})]})]},n))]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,s.jsx)(v.zx,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,s.jsx)(v.zx,{variant:"default",onClick:I,children:"Save Proxy Settings"})]})]})]})})}),document.body)]})},H=e=>{let{secretDeclaration:n,project:t,organization:r,className:i,onAddAccount:c,disabled:d,...u}=e,[m,p]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[f,j]=(0,a.useState)("url"),[y,N]=(0,a.useState)(n.metadata),{userProfile:w,idTokenRef:C}=(0,k.H)(),[S]=(0,l.Ve)(),[z]=(0,l.Of)(),A=()=>{p(!1),j("url"),h(!1),N(n.metadata)},O=null==y?void 0:y.find(e=>"URL"===e.name),Z=null==y?void 0:y.filter(e=>"URL"!==e.name&&!e.isHidden),I=(e,n)=>{N(t=>null==t?void 0:t.map(t=>t.name===n?{...t,value:e}:t))},P=async()=>{var e,n;if(!(null==O?void 0:null===(e=O.value)||void 0===e?void 0:e.trim())){g.Am.error("URL is required");return}h(!0);try{let e=await z({mcpServerUrl:O.value,userProfile:w,idToken:C.current,projectId:null==t?void 0:t.project_id,organizationId:null==r?void 0:r.organization_id}).unwrap();if(h(!1),e.requires_oauth){let n=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(e=>e.toString(16).padStart(2,"0")).join(""),s=new TextEncoder,l=await crypto.subtle.digest("SHA-256",s.encode(n)),a=btoa(String.fromCharCode(...new Uint8Array(l))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),o=JSON.stringify({userId:w.user_id,project_id:null==t?void 0:t.project_id,organization_id:null==r?void 0:r.organization_id,token_type:"mcp_server",code_verifier:n,client_id:e.client_id,resource:e.resource}),i=new URLSearchParams({response_type:"code",client_id:e.client_id,redirect_uri:e.redirect_uri,state:o,code_challenge:a,code_challenge_method:"S256",...e.resource&&{resource:e.resource}});e.scopes&&i.set("scope",e.scopes);let d="".concat(e.authorization_endpoint,"?").concat(i.toString());window.open(d,"_blank","noopener,noreferrer"),A(),null==c||c()}else j("manual")}catch(e){h(!1),g.Am.error((null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.error)||"Failed to connect to MCP server")}},L=async()=>{var e;if(Z){let e=Z.filter(e=>{var n;return!e.isOptional&&!(null===(n=e.value)||void 0===n?void 0:n.trim())});if(e.length>0){g.Am.error("Please fill in required field(s): ".concat(e.map(e=>e.name).join(", ")));return}}let s=null==y?void 0:y.find(e=>"Access Token / API Key"===e.name),l={secret_type:n.secret_type,project_id:null==t?void 0:t.project_id,organization_id:null==r?void 0:r.organization_id,value:(null==s?void 0:s.value)||"",metadata:y,nickname:(null==y?void 0:null===(e=y.find(e=>"Label"===e.name))||void 0===e?void 0:e.value)||((null==O?void 0:O.value)?new URL(O.value).hostname:"MCP Server")};if("error"in await S({secret:l,userProfile:w,idToken:C.current,projectId:null==t?void 0:t.project_id,organizationId:null==r?void 0:r.organization_id})){g.Am.error("Failed to add credential");return}g.Am.success("Successfully added new account for ".concat(n.secret_name,"!")),A(),null==c||c()};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)(v.zx,{variant:"outline",className:"".concat(i),onClick:()=>p(!0),disabled:d||x,...u,children:[x&&(0,s.jsx)(o.Z,{className:"animate-spin"}),(0,s.jsx)("span",{className:"text-nowrap",children:x?"Connecting...":"Connect"})]}),(0,s.jsx)(b.Vq,{open:m,onOpenChange:e=>!e&&A(),children:(0,s.jsxs)(b.cZ,{children:[(0,s.jsxs)(b.a7,{children:[(0,s.jsxs)(b.fK,{children:[(0,s.jsx)(b.$N,{className:"text-lg font-semibold",children:n.secret_name}),(0,s.jsx)(b.Be,{children:"url"===f?"Enter the MCP server URL to get started":"This server requires an API key or access token"})]}),"url"===f&&O&&(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("label",{htmlFor:"mcp-url",className:"text-muted-foreground block text-sm font-medium",children:["URL",(0,s.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]}),(0,s.jsx)(_.I,{id:"mcp-url",value:O.value,placeholder:O.placeholder||"https://mcp.example.com",onChange:e=>I(e.target.value,"URL"),spellCheck:"false"})]}),"manual"===f&&Z&&(0,s.jsx)(V,{metadata:Z,handleMetadataChange:I,showSecret:!1})]}),(0,s.jsxs)(b.cN,{children:[(0,s.jsx)(v.zx,{variant:"outline",onClick:A,children:"Cancel"}),(0,s.jsxs)(v.zx,{onClick:"url"===f?P:L,disabled:x,children:[x&&(0,s.jsx)(o.Z,{className:"mr-2 animate-spin"}),"url"===f?"Continue":"Connect"]})]})]})})]})}},90572:function(e,n,t){"use strict";var s=t(85893),l=t(67294),a=t(5295),o=t(88106);n.Z=e=>{let{operator:n}=e,t="server_id"in n,r=(0,l.useMemo)(()=>{if(null==n?void 0:n.category)return(0,a.T2)(null==n?void 0:n.category)},[n]);return(0,s.jsxs)("div",{className:"flex w-full flex-row items-center gap-3 overflow-clip rounded-lg p-3",style:{backgroundColor:"color-mix(in srgb, ".concat(null==r?void 0:r.medium,", transparent 80%)"),color:"color-mix(in srgb, ".concat(null==r?void 0:r.black,", transparent 20%)")},children:[(0,s.jsx)("div",{className:"flex size-14 flex-none items-center justify-center rounded-md",style:{backgroundColor:"color-mix(in srgb, ".concat(null==r?void 0:r.medium,", transparent 70%)")},children:(0,o.hY)(t?"/images/mcp.svg":n.icon,24)}),(0,s.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:t?"MCP Node":n.name}),(0,s.jsx)("span",{className:"text-xs",children:t?"Build custom nodes with MCP":n.description})]})]})}},8644:function(e,n,t){"use strict";t.d(n,{Z:function(){return L}});var s=t(85893),l=t(67294),a=t(78865),o=t(62190),r=t(4270),i=t(36127),c=t(8267),d=t(30202),u=t(64712),m=t(29876),p=t(77311),x=t(7161),h=t(64127),f=t(61857),g=t(42414),v=t(94453),j=t(821),_=t(32025),y=t(45837),b=t(18998),N=t(27801),w=t(50855),C=t(66682),k=t(37825),S=t(66447),z=t(5295),A=t(88106),O=t(86168),Z=t(29585),I=e=>{let{open:n,setOpen:t,categoryName:a,operatorDeclarationsAssociatedWithSecret:o,mcpToolsAssociatedWithScopes:r,scopesSelected:i,onParentClose:c,handleConfirmSelectedScopes:d,isLoading:u}=e,p=(0,l.useMemo)(()=>null==o?void 0:o.reduce((e,n)=>{if(!Object.values(n.secrets).some(e=>Array.isArray(e)?null==e?void 0:e.some(e=>!(null==i?void 0:i.includes(e))):!(null==i?void 0:i.includes(e))))return e;let t=Object.values(n.secrets).every(e=>Array.isArray(e)?e.length>0&&e.every(e=>!(null==i?void 0:i.includes(e))):e&&!(null==i?void 0:i.includes(e)));return e.push({...n,isRenounced:t}),e},[]),[o,i]),h=(0,l.useMemo)(()=>(null==r?void 0:r.filter(e=>{var n;return null===(n=e.required_scopes)||void 0===n?void 0:n.length}).map(e=>{let n=e.required_scopes.filter(e=>!(null==i?void 0:i.includes(e)));return n.length>0?{...e,isRenounced:n.length===e.required_scopes.length}:null}).filter(Boolean))||[],[r,i]),f=(0,l.useMemo)(()=>z.Qr.find(e=>e.name===a),[a]);return(0,s.jsx)(x.Vq,{open:n,onOpenChange:t,children:(0,s.jsxs)(x.cZ,{className:"min-w-2xl",children:[(0,s.jsxs)(x.a7,{className:"gap-0! p-0!",children:[(0,s.jsxs)(x.fK,{className:"flex items-center justify-center gap-1.5 border-b p-5",children:[(null==f?void 0:f.icon)&&(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex size-16 flex-none items-center justify-center rounded-md shadow-sm",children:(0,A.hY)(void 0,48)},"default-icon"),(0,s.jsx)(S.Z,{size:20}),(0,s.jsx)("div",{className:"flex size-16 flex-none items-center justify-center rounded-md shadow-sm",children:(0,A.hY)(null==f?void 0:f.icon,32)},"category-icon")]}),(0,s.jsx)(x.$N,{children:"The following node(s) will have restricted functionality."})]}),(0,s.jsxs)("div",{className:"flex max-h-[50svh] flex-col gap-4 overflow-y-auto p-5",children:[null==p?void 0:p.map(e=>(0,s.jsx)(O.Z,{operator:e,isRenounced:null==e?void 0:e.isRenounced},null==e?void 0:e.name)),null==h?void 0:h.map(e=>(0,s.jsx)(Z.Z,{tool:e,isRenounced:e.isRenounced,category:a},"mcp-tool-".concat(e.id)))]})]}),(0,s.jsxs)(x.cN,{children:[(0,s.jsx)(x.GG,{asChild:!0,children:(0,s.jsx)(m.zx,{variant:"outline",children:"Close"})}),(0,s.jsx)(m.zx,{onClick:()=>{d(),null==c||c()},loading:u,children:"Confirm"})]})]})})},P=t(3029),L=e=>{var n,t,S,z,A,O;let{open:Z,setOpen:L,selectedSecretDeclaration:T,onParentClose:D,groupId:E,scopes:M,categoryName:G,givePermissionOverrideFunction:q,operatorDeclarations:R}=e,[F,U]=(0,l.useState)(!1),[K,V]=(0,l.useState)(""),[B,J]=(0,l.useState)([]),{userProfile:H}=(0,y.H)(),Y=(0,d.NL)(),{scopes:$,permittedScopesOperators:Q,operatorDeclarationsAssociatedWithSecret:W,mcpToolsAssociatedWithScopes:X,totalOperatorDeclarationsCount:ee,disabledScopes:en,isLoadingPermittedScopesOperators:et,isLoadingMCPTools:es,isPendingMCPTools:el,isPendingOperatorDeclarations:ea}=(0,v.HN)({categoryName:G,secretDeclaration:T,groupId:E,passedScopes:M,externalOperatorDeclarations:R,enabled:Z}),eo="organization_acl?organization_id=".concat(null==H?void 0:null===(n=H.organization)||void 0===n?void 0:n.organization_id);(null==Q?void 0:Q.scopes)&&(eo+="&acl_id=".concat(null==Q?void 0:null===(S=Q.scopes)||void 0===S?void 0:S.organization_acl_id));let er=(0,j.QH)({path:eo,method:(null==Q?void 0:Q.scopes)?j.J7.PUT:j.J7.POST}),ei=(0,l.useMemo)(()=>K?null==$?void 0:$.filter(e=>{var n;return null==e?void 0:null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(K.toLowerCase())}):$,[$,K]),ec=(0,l.useMemo)(()=>(null==$?void 0:$.length)||0,[$]),ed=(0,l.useMemo)(()=>(null==B?void 0:B.length)||0,[B]),eu=(0,l.useMemo)(()=>((null==W?void 0:W.filter(e=>Object.values(e.secrets).some(e=>Array.isArray(e)?e.every(e=>B.includes(e)):B.includes(e))).length)||0)+((null==X?void 0:X.filter(e=>!e.required_scopes||0===e.required_scopes.length||e.required_scopes.every(e=>B.includes(e))).length)||0),[W,X,B]),em=(0,l.useMemo)(()=>eu/ee*100,[eu,ee]);(0,l.useEffect)(()=>{var e,n,t;if(T){let e=(null==$?void 0:$.map(e=>null==e?void 0:e.name))||[],t=(null===(n=T.default_scopes)||void 0===n?void 0:n.length)?T.default_scopes.filter(n=>e.includes(n)):e;en&&(null==en?void 0:en.length)!==0?J(t.filter(e=>!(null==en?void 0:en.includes(e)))):J(t)}else(null==Q?void 0:null===(e=Q.scopes)||void 0===e?void 0:e.item_list)&&J(null==Q?void 0:null===(t=Q.scopes)||void 0===t?void 0:t.item_list)},[$,G,Q,T,en]);let ep=()=>{let e;if(q)return null==q?void 0:q(B);(null==T?void 0:T.category)?e=(0,k.Sp)(null==T?void 0:T.category):G&&(e=(0,k.Sp)(G)),E&&e&&er.mutate({group_id:E,item_type:"".concat((0,k.Sp)(e),"_scopes"),item_list:B,is_allowed:!0},{onSuccess:()=>{L(!1),null==D||D(),u.Am.success("".concat(e," app scopes ").concat(Q?"updated":"created"," successfully")),Y.invalidateQueries({queryKey:["".concat(E,"-app-permissions")]}),Y.invalidateQueries({queryKey:["".concat(null!=G?G:null==T?void 0:T.category,"-").concat(null!=E?E:null==H?void 0:H.group_id,"-permitted-scopes-operators")]}),Y.invalidateQueries({queryKey:["".concat(null!=G?G:null==T?void 0:T.category,"-").concat(null!=E?E:null==H?void 0:H.group_id,"-app-scopes-operators")]}),(0,w.rB)(_.Z.INTEGRATION_CONNECTED,{integration_name:null!=G?G:null==T?void 0:T.category,tags:["marketing","activation","integrations"]})}})};return(0,s.jsxs)(x.Vq,{open:Z,onOpenChange:L,children:[(0,s.jsxs)(x.cZ,{className:(0,b.cn)("flex flex-col",ee>0?"min-w-[88svw]":"md:min-w-3xl"),children:[(0,s.jsxs)(x.a7,{className:"flex flex-grow gap-0! p-0!",children:[(0,s.jsx)(x.fK,{className:"border-b p-5",children:(0,s.jsxs)(x.$N,{children:["Gumloop is Requesting Permission to Access ",null!==(z=null==T?void 0:T.category)&&void 0!==z?z:G,"'s Scopes"]})}),(0,s.jsxs)("div",{className:"flex w-full flex-grow overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-4 border-r px-4 pt-8 md:px-16 xl:max-w-3xl xl:min-w-3xl",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-5 sm:flex-row",children:[(0,s.jsx)(C.Z,{title:"Permission Scopes",description:"You have full control about what you can do through Gumloop."}),ec>0&&(0,s.jsxs)(g.u,{children:[(0,s.jsx)(g.aJ,{asChild:!0,children:(0,s.jsxs)(m.zx,{variant:"ghost",size:"xs",onClick:ed===ec?()=>{J([])}:()=>{J((null==$?void 0:$.map(e=>null==e?void 0:e.name).filter(e=>!(null==en?void 0:en.includes(e))))||[])},disabled:(null==en?void 0:en.length)===ec,className:"text-muted-foreground group hidden text-base md:flex",accent:ed===ec?"destructive":"success",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5 font-medium",children:[(0,s.jsx)("span",{children:ed}),"/",(0,s.jsx)("span",{children:ec})]}),(0,s.jsx)(a.Z,{className:"group-hover:hidden"}),ed===ec?(0,s.jsx)(o.Z,{className:"hidden group-hover:block"}):(0,s.jsx)(r.Z,{className:"hidden group-hover:block"})]})}),(0,s.jsx)(g._v,{children:ed===ec?"Deselect all scopes":"Select all scopes"})]})]}),(0,s.jsx)(h.I,{LeadingIcon:i.Z,placeholder:"Search for scopes",value:K,onChange:e=>V(e.target.value),type:"search"}),(0,s.jsxs)("div",{className:"scrollbar-hide flex max-h-96 w-full flex-col overflow-y-auto sm:max-h-[60dvh] md:min-h-[60dvh]",children:[et?(0,s.jsx)("div",{className:"flex flex-col",children:Array.from({length:10}).map((e,n)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 px-2 py-3",children:[(0,s.jsx)(f.O,{className:"h-4 flex-none rounded-full md:max-w-1/3 md:min-w-1/3"}),(0,s.jsx)(f.O,{className:"h-4 w-full"}),(0,s.jsx)(f.O,{className:"flex size-4 flex-none rounded-md"})]},n))}):null==ei?void 0:null===(t=ei.map)||void 0===t?void 0:t.call(ei,e=>{let{flag:n,displayName:t}=(0,N.Gx)(e.name),l=null==en?void 0:en.includes(null==e?void 0:e.name);return(0,s.jsxs)(g.u,{children:[(0,s.jsx)(g.aJ,{asChild:!0,children:(0,s.jsxs)("label",{className:(0,b.cn)("border-muted hover:bg-muted/10 flex w-full cursor-pointer flex-row-reverse items-center gap-6 border-b px-2 py-3 md:flex-row",l&&"cursor-not-allowed"),children:[(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-1 md:flex-row",children:[(0,s.jsxs)("div",{className:"text-accent-foreground flex items-center gap-1.5 text-sm font-medium break-words! md:max-w-1/3 md:min-w-1/3",children:[n&&"user scope"===n&&(0,s.jsxs)(g.u,{children:[(0,s.jsx)(g.aJ,{asChild:!0,children:(0,s.jsx)(c.Z,{size:16})}),(0,s.jsx)(g._v,{children:"User Scope"})]}),(0,s.jsxs)("p",{className:"break-all",children:[" ",t]})]}),(null==e?void 0:e.description)&&(0,s.jsx)("span",{className:"text-muted-foreground flex flex-grow text-sm",children:null==e?void 0:e.description})]}),(0,s.jsx)(p.X,{disabled:l,variant:"accent-strong",checked:null==B?void 0:B.includes(null==e?void 0:e.name),onCheckedChange:()=>{(null==B?void 0:B.includes(null==e?void 0:e.name))?J(null==B?void 0:B.filter(n=>n!==(null==e?void 0:e.name))):J([...B,null==e?void 0:e.name])}})]})}),l&&(0,s.jsx)(g._v,{children:"This scope has been disabled by your admin."})]},e.name)}),(0,s.jsx)("div",{className:"h-8 w-full flex-none"})]})]}),ee>0&&(0,s.jsx)(P.Z,{title:"Nodes",description:"Each node requires certain permissions. ",totalOperatorDeclarationsCount:ee,selectedOperatorDeclarationsRatio:em,selectedOperatorDeclarationsCount:eu,operatorDeclarationsAssociatedWithSecret:W,mcpToolsAssociatedWithScopes:X,scopesSelected:B,categoryName:G,isLoadingMCPTools:es||el,isLoadingOperatorDeclarations:et||ea})]})]}),(0,s.jsxs)(x.cN,{children:[(0,s.jsx)(x.GG,{asChild:!0,children:(0,s.jsx)(m.zx,{variant:"outline",children:"Back"})}),(0,s.jsx)(m.zx,{onClick:()=>{eu===ee?ep():U(!0)},loading:er.isPending,children:"Confirm"})]})]}),(0,s.jsx)(I,{open:F,setOpen:U,handleConfirmSelectedScopes:ep,operatorDeclarationsAssociatedWithSecret:W||[],mcpToolsAssociatedWithScopes:X||[],scopesSelected:B,categoryName:null!==(O=null!==(A=null==T?void 0:T.category)&&void 0!==A?A:G)&&void 0!==O?O:"",onParentClose:()=>{U(!1),null==D||D()},isLoading:er.isPending})]})}},97827:function(e,n,t){"use strict";var s,l,a=t(85893),o=t(67294),r=t(30202),i=t(64712),c=t(29876),d=t(7161),u=t(92437),m=t(31443),p=t(821),x=t(32025),h=t(45837),f=t(18998),g=t(50855),v=t(43526),j=t(37825),_=t(8644);(s=l||(l={})).FULL_PERMISSIONS="full-permissions",s.CONTROL_SCOPES="control-scopes",n.Z=e=>{var n,t;let{open:s,setOpen:l,selectedSecretDeclaration:y,onParentClose:b,groupId:N,givePermissionOverrideFunction:w}=e,{userProfile:C}=(0,h.H)(),[k,S]=(0,o.useState)("full-permissions"),[z,A]=(0,o.useState)(!1),O=(0,r.NL)(),{data:Z}=(0,m.D)(null==y?void 0:y.category,{enabled:s&&!!(null==y?void 0:y.category)}),I=(0,p.QH)({path:"organization_acl?organization_id=".concat(null==C?void 0:null===(n=C.organization)||void 0===n?void 0:n.organization_id)}),P=()=>{var e,n;if(w)return null==w?void 0:w(null!==(n=null==y?void 0:y.default_scopes)&&void 0!==n?n:[]);(null==y?void 0:y.category)&&N&&I.mutate({group_id:N,item_type:"".concat((0,j.Sp)(null==y?void 0:y.category),"_scopes"),item_list:(null==Z?void 0:null===(e=Z.scopes)||void 0===e?void 0:e.map(e=>e.name))||[],is_allowed:!0},{onSuccess:()=>{O.invalidateQueries({queryKey:["".concat(null==y?void 0:y.category,"-app-scopes-operators")]}),O.invalidateQueries({queryKey:["".concat(N,"-app-permissions")]}),O.invalidateQueries({queryKey:["".concat(null==y?void 0:y.category,"-").concat(N,"-app-scopes-operators")]}),l(!1),null==b||b(),i.Am.success("".concat(null==y?void 0:y.secret_name," has been granted default permissions")),(0,g.rB)(x.Z.INTEGRATION_CONNECTED,{integration_name:null==y?void 0:y.category,tags:["marketing","activation","integrations"]})}})},L=()=>{A(!0)},T=(0,o.useMemo)(()=>{var e;return(null==Z?void 0:null===(e=Z.scopes)||void 0===e?void 0:e.filter(e=>e.warning))||[]},[Z]);return(0,o.useEffect)(()=>{s&&S("full-permissions")},[s]),(0,a.jsxs)(d.Vq,{open:s,onOpenChange:l,children:[(0,a.jsxs)(d.cZ,{children:[(0,a.jsxs)(d.a7,{children:[(0,a.jsx)(d.fK,{children:(0,a.jsxs)(d.$N,{children:["How would you like to customize the scopes for ",null==y?void 0:y.secret_name,"?"]})}),(0,a.jsx)(v.Z,{warnings:T.map(e=>"".concat(e.name,": ").concat(e.warning)),hasBannerAbove:!1,fullRounded:!0}),(0,a.jsxs)(u.E,{className:"flex flex-col gap-4",value:k,onValueChange:e=>S(e),children:[(0,a.jsxs)("label",{htmlFor:"full-permissions",className:(0,f.cn)("flex cursor-pointer items-center gap-2.5 rounded-md border p-4","full-permissions"===k&&"border-accent-foreground bg-accent"),children:[(0,a.jsxs)("div",{className:"flex flex-grow flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Give Default Permissions"}),(0,a.jsx)("span",{className:"text-accent-foreground text-sm font-medium",children:"Recommended"})]}),(0,a.jsx)("span",{className:"text-muted-foreground text-sm font-medium",children:"Unrestricted access to all of Gumloop's features, including dynamic nodes"})]}),(0,a.jsx)(u.m,{value:"full-permissions",id:"full-permissions",checked:"full-permissions"===k})]}),(null==Z?void 0:Z.scopes)&&(null==Z?void 0:null===(t=Z.scopes)||void 0===t?void 0:t.length)>0&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-grow items-center gap-1.5",children:[(0,a.jsx)("div",{className:"bg-border flex h-[1px] flex-grow"}),(0,a.jsx)("span",{className:"text-muted-foreground text-sm font-medium",children:"OR"}),(0,a.jsx)("div",{className:"bg-border flex h-[1px] flex-grow"})]}),(0,a.jsxs)("label",{htmlFor:"control-scopes",className:(0,f.cn)("flex cursor-pointer items-center gap-2.5 rounded-md border p-4","control-scopes"===k&&"border-accent-foreground bg-accent"),children:[(0,a.jsxs)("div",{className:"flex flex-grow flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Control Scopes"}),(0,a.jsxs)("span",{className:"text-muted-foreground text-sm font-medium",children:["Restrict Gumloop's access to ",null==y?void 0:y.secret_name,"'s scopes"]})]}),(0,a.jsx)(u.m,{value:"control-scopes",id:"control-scopes"})]})]})]})]}),(0,a.jsxs)(d.cN,{children:[(0,a.jsx)(d.GG,{asChild:!0,children:(0,a.jsx)(c.zx,{variant:"outline",children:"Back"})}),(0,a.jsx)(c.zx,{loading:I.isPending,onClick:()=>{"full-permissions"===k?P():"control-scopes"===k&&L()},children:"Continue"})]})]}),(0,a.jsx)(_.Z,{open:z,setOpen:A,selectedSecretDeclaration:y,onParentClose:()=>{A(!1),null==b||b()},groupId:N,scopes:null==Z?void 0:Z.scopes,givePermissionOverrideFunction:w})]})}},29585:function(e,n,t){"use strict";var s=t(85893),l=t(67294),a=t(52609),o=t(8267),r=t(78865),i=t(62190),c=t(71424),d=t(42414),u=t(5295),m=t(18998),p=t(5197),x=t(88106),h=t(27801),f=t(3115);n.Z=e=>{let{tool:n,scopesSelected:t,isRenounced:g=!1,category:v}=e,j=n.required_scopes||[],_=0===j.length||j.every(e=>null==t?void 0:t.includes(e)),y=n.is_restricted,{display:b,tooltip:N}=(0,f.e)(n.creditCost),w=(0,l.useMemo)(()=>(0,u.T2)(v||"Browser Extension"),[v]);return(0,s.jsxs)(d.u,{children:[(0,s.jsx)(d.aJ,{asChild:!0,children:(0,s.jsxs)("div",{className:(0,m.cn)("bg-background flex flex-col rounded-xl border p-1 shadow-xs",y&&"!pointer-events-none opacity-70"),children:[(0,s.jsxs)("div",{className:"flex w-full flex-row items-center gap-3 overflow-clip rounded-lg p-3",style:{backgroundColor:"color-mix(in srgb, ".concat(null==w?void 0:w.medium,", transparent 80%)"),color:"color-mix(in srgb, ".concat(null==w?void 0:w.black,", transparent 20%)")},children:[(0,s.jsx)("div",{className:"flex size-14 flex-none items-center justify-center rounded-md",style:{backgroundColor:"color-mix(in srgb, ".concat(null==w?void 0:w.medium,", transparent 70%)")},children:(0,x.hY)("/images/mcp.svg",24)}),(0,s.jsxs)("div",{className:"flex flex-grow flex-col gap-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:(0,p.KD)(n.name)}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsx)(c.C,{size:"sm",className:"text-background flex-shrink-0 !rounded-sm font-medium",style:{backgroundColor:null==w?void 0:w.dark},children:"MCP"}),b&&(0,s.jsxs)(d.u,{children:[(0,s.jsx)(d.aJ,{asChild:!0,children:(0,s.jsxs)("span",{className:"bg-muted text-muted-foreground flex items-center gap-1 rounded px-2 py-0.5 text-xs font-medium whitespace-nowrap",children:[(0,s.jsx)(a.Z,{size:12}),b]})}),N&&(0,s.jsx)(d._v,{children:(0,s.jsx)("div",{className:"text-xs whitespace-pre-line",children:N})})]})]})]}),(0,s.jsx)("span",{className:"text-xs",children:n.description})]})]}),t&&j.length>0&&(0,s.jsx)("div",{className:"flex w-full flex-grow flex-wrap px-3 py-2.5",children:j.map((e,n)=>{let l=null==t?void 0:t.includes(e),{flag:a,displayName:c}=(0,h.Gx)(e);return(0,s.jsxs)("div",{className:(0,m.cn)("m-1 flex items-center gap-1 overflow-hidden rounded-md px-2 py-1 text-sm font-medium",_?"!bg-success/50 !text-success-foreground":l?"bg-muted text-muted-foreground":"bg-destructive text-destructive-foreground"),children:[(0,s.jsxs)("span",{className:"flex items-center gap-1 overflow-hidden",children:[a&&"user scope"===a&&(0,s.jsxs)(d.u,{children:[(0,s.jsx)(d.aJ,{asChild:!0,children:(0,s.jsx)(o.Z,{size:14})}),(0,s.jsx)(d._v,{children:"User Scope"})]}),(0,s.jsx)("span",{className:"truncate break-normal",children:c})]}),l?(0,s.jsx)(r.Z,{size:16}):(0,s.jsx)(i.Z,{size:16})]},"mcp-".concat(e,"-").concat(n))})}),g&&(0,s.jsx)("div",{className:"bg-destructive text-destructive-foreground mt-1 flex w-full flex-grow rounded-md px-2 py-1.5",children:(0,s.jsx)("span",{className:"w-full text-center text-xs font-medium",children:"You will not be able to use this tool."})})]})}),y&&(0,s.jsxs)(d._v,{children:[(0,p.KD)(n.name)," is restricted by your admin."]})]})}},86168:function(e,n,t){"use strict";var s=t(85893);t(67294);var l=t(8267),a=t(78865),o=t(62190),r=t(42414),i=t(18998),c=t(90572);n.Z=e=>{let{operator:n,scopesSelected:t,isRenounced:d=!1}=e;return(0,s.jsxs)("div",{className:"bg-background flex flex-col rounded-xl border p-1 shadow-xs",children:[(0,s.jsx)(c.Z,{operator:n}),t&&(0,s.jsx)("div",{className:"flex w-full flex-grow flex-wrap px-3 py-2.5",children:Object.entries(null==n?void 0:n.secrets).map(e=>{let[n,c]=e,d=Array.isArray(c)?c:[c],u=null==d?void 0:d.every(e=>null==t?void 0:t.includes(e));return null==d?void 0:d.map((e,c)=>{var d;let m=null==t?void 0:t.includes(e),p=null==e?void 0:e.match(/^__(.+)__(.+)$/),x=p?null===(d=p[1])||void 0===d?void 0:d.replace(/_/g," "):void 0,h=p?p[2]:e;return(0,s.jsxs)("div",{className:(0,i.cn)("m-1 flex items-center gap-1 overflow-hidden rounded-md px-2 py-1 text-sm font-medium",u?"bg-success/50! text-success-foreground!":m?"bg-muted text-muted-foreground":"bg-destructive text-destructive-foreground"),children:[(0,s.jsxs)("span",{className:"flex items-center gap-1 overflow-hidden",children:[x&&"user scope"===x&&(0,s.jsxs)(r.u,{children:[(0,s.jsx)(r.aJ,{asChild:!0,children:(0,s.jsx)(l.Z,{size:14})}),(0,s.jsx)(r._v,{children:"User Scope"})]}),(0,s.jsx)("span",{className:"truncate break-normal",children:h})]}),m?(0,s.jsx)(a.Z,{size:16}):(0,s.jsx)(o.Z,{size:16})]},"".concat(n,"-").concat(e,"-").concat(c))})})}),d&&(0,s.jsx)("div",{className:"bg-destructive text-destructive-foreground mt-1 flex w-full flex-grow rounded-md px-2 py-1.5",children:(0,s.jsx)("span",{className:"w-full text-center text-xs font-medium",children:"You will not be able to use this node."})})]})}},3029:function(e,n,t){"use strict";var s=t(85893),l=t(78865),a=t(52542),o=t(66682),r=t(61857),i=t(18998),c=t(29585),d=t(86168);n.Z=e=>{let{title:n,description:t,totalOperatorDeclarationsCount:u,selectedOperatorDeclarationsRatio:m,selectedOperatorDeclarationsCount:p,operatorDeclarationsAssociatedWithSecret:x,mcpToolsAssociatedWithScopes:h,scopesSelected:f,categoryName:g,isLoadingMCPTools:v,isLoadingOperatorDeclarations:j}=e;return(0,s.jsxs)("div",{className:"hidden flex-grow flex-col gap-4 overflow-y-auto px-12 pt-8 lg:flex",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsx)(o.Z,{title:n,description:t}),u>0&&(0,s.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 rounded-md px-1.5 py-0.5 font-medium",100===m&&"text-muted-foreground!",m<100&&"text-warning-foreground! bg-warning/50!"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)("span",{children:p}),"/",(0,s.jsx)("span",{children:u})]}),100===m&&(0,s.jsx)(l.Z,{size:16}),m<100&&(0,s.jsx)(a.Z,{size:16})]})]}),(0,s.jsxs)("div",{className:"flex max-h-[60dvh] min-h-[60dvh] w-full flex-col gap-4",children:[j?(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Array.from({length:5}).map((e,n)=>(0,s.jsx)(r.O,{className:"h-12 w-full"},n))}):null==x?void 0:x.map(e=>(0,s.jsx)(d.Z,{operator:e,scopesSelected:f},"".concat(e.name,"-").concat(e.operator_id||""))),v?(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Array.from({length:5}).map((e,n)=>(0,s.jsx)(r.O,{className:"h-12 w-full"},n))}):null==h?void 0:h.map(e=>(0,s.jsx)(c.Z,{tool:e,scopesSelected:f,category:g},"mcp-tool-".concat(e.id))),(0,s.jsx)("div",{className:"h-8 w-full flex-none"})]})]})}},31443:function(e,n,t){"use strict";t.d(n,{D:function(){return l}});var s=t(821);let l=(e,n)=>(0,s.DV)({path:"get_operator_category_scopes?category=".concat(e),queryKey:["".concat(e,"-app-scopes-operators")],options:n})},40930:function(e,n,t){"use strict";t.d(n,{y:function(){return o}});var s=t(37825),l=t(45837),a=t(821);function o(e){let{serverId:n,categoryName:t,groupId:o,options:r}=e,{userProfile:i}=(0,l.H)();return(0,a.DV)({path:(()=>{var e;let l="organization_permission_group_app_permissions?organization_id=".concat(null==i?void 0:null===(e=i.organization)||void 0===e?void 0:e.organization_id),a=[];return o&&a.push("group_id=".concat(o)),t&&a.push("category_name=".concat((0,s.Sp)(t))),n&&a.push("server_id=".concat((0,s.Sp)(n))),a.length>0?"".concat(l,"&").concat(a.join("&")):l})(),queryKey:(()=>{let e=[];return o&&e.push("".concat(o,"-app-permissions")),t&&e.push("".concat(t,"-app-permissions")),n&&e.push("".concat(n,"-app-permissions")),e})(),...r})}},94453:function(e,n,t){"use strict";t.d(n,{HN:function(){return u},i7:function(){return d},pN:function(){return c}});var s=t(69245),l=t(67294),a=t(31443),o=t(821),r=t(45837),i=t(40930);let c=e=>(0,o.DV)({path:"get_operator_categories_with_scopes",queryKey:["operator-categories-with-scopes"],options:{staleTime:1/0,...e}}),d=e=>(0,o.DV)({path:"get_operator_categories_summary",queryKey:["operator-categories-summary"],options:{staleTime:1/0,...e}}),u=e=>{var n;let{categoryName:t,secretDeclaration:d,groupId:u,passedScopes:m,externalOperatorDeclarations:p,enabled:x=!0}=e,{userProfile:h,idTokenRef:f}=(0,r.H)(),g=(0,l.useMemo)(()=>t||(null==d?void 0:d.category),[t,null==d?void 0:d.category]),{data:v,isLoading:j}=c(),{data:_}=(0,a.D)(g,{enabled:x&&!!g&&!m&&(null==v?void 0:v.categories.includes(g))&&!j,initialData:m?{scopes:m}:void 0}),{data:y,isLoading:b}=(0,i.y)({categoryName:null!=g?g:"",groupId:u,options:{enabled:x&&!!g&&!!(u||(null==h?void 0:h.group_id))}}),{data:N,isLoading:w,isPending:C}=(0,o.DV)({path:"/operator_declarations",queryKey:["operator_declarations"],options:{enabled:!p||(null==p?void 0:p.length)<1}}),{data:k}=(0,s.Y)({userProfile:h,idToken:f.current},{skip:!x||!h.isLoggedIn()||h.isLoading()}),S=(0,l.useMemo)(()=>{var e;let n=g||t;return null==k?void 0:null===(e=k.find(e=>e.category===n))||void 0===e?void 0:e.server_id},[k,g,t]),{data:z,isLoading:A,isPending:O}=(0,o.DV)({path:S?"gumcp_server_tools?server_id=".concat(S,"&organization_id=").concat(null==h?void 0:null===(n=h.organization)||void 0===n?void 0:n.organization_id,"&group_id=").concat(null!=u?u:null==h?void 0:h.group_id):"",queryKey:["mcp-tools-".concat(S,"-").concat(u||(null==h?void 0:h.group_id))],options:{enabled:x&&!!S&&!!(u||(null==h?void 0:h.group_id))}}),Z=null!=p?p:null==N?void 0:N.pipeline_components,I=(0,l.useMemo)(()=>{var e;return(null==y?void 0:null===(e=y.scopes)||void 0===e?void 0:e.item_list)?null==m?void 0:m.map(e=>null==e?void 0:e.name).filter(e=>{var n,t;return y&&!(null==y?void 0:null===(t=y.scopes)||void 0===t?void 0:null===(n=t.item_list)||void 0===n?void 0:n.includes(e))}):[]},[m,y]),P=(0,l.useMemo)(()=>null!=m?m:null==_?void 0:_.scopes,[m,_]),L=(0,l.useMemo)(()=>null==Z?void 0:Z.filter(e=>{let n=(null==d?void 0:d.category)?(null==e?void 0:e.category)===(null==d?void 0:d.category):!!g&&(null==e?void 0:e.category)===g,t=(null==d?void 0:d.secret_type)?Object.keys(null==e?void 0:e.secrets).includes(null==d?void 0:d.secret_type):Object.keys(null==e?void 0:e.secrets).length>0;return n&&t}),[Z,d,g]),T=(0,l.useMemo)(()=>{if(!z||!P)return[];let e=new Set(P.map(e=>e.name));return(null==z?void 0:z.filter(n=>{var t;return!(null===(t=n.required_scopes)||void 0===t?void 0:t.length)||n.required_scopes.some(n=>e.has(n))}))||[]},[z,P]),D=(0,l.useMemo)(()=>((null==L?void 0:L.length)||0)+((null==T?void 0:T.length)||0),[L,T]);return{scopes:P,operatorDeclarations:Z,permittedScopesOperators:y,categoryName:g,disabledScopes:I,operatorDeclarationsAssociatedWithSecret:L,mcpToolsAssociatedWithScopes:T,totalOperatorDeclarationsCount:D,isLoadingPermittedScopesOperators:b,isLoadingMCPTools:A,isLoadingOperatorDeclarations:w,isPendingMCPTools:O,isPendingOperatorDeclarations:C}}},45881:function(e,n,t){"use strict";t.d(n,{q:function(){return s},s:function(){return a}});var s,l=t(90273);(s||(s={})).MODEL="model";class a{to_dict(){return{organization_acl_id:this.organization_acl_id,organization_id:this.organization_id,item_type:this.item_type,item_list:this.item_list,is_allowed:this.is_allowed,is_active:this.is_active,created_ts:this.created_ts.toISOString()}}static async loadByOrganizationAndType(e,n,t,s){if(!e)return null;try{let o=await (0,l.eN)("organization_acl_rules?organization_id=".concat(e,"&item_type=").concat(n),t,s,"GET");if(o.acl_rule)return new a(o.acl_rule);return null}catch(e){return console.error("Error loading ACL rule:",e),null}}static async loadById(e,n,t,s){if(!n)return null;try{let o=await (0,l.eN)("organization_acl?organization_id=".concat(n,"&acl_id=").concat(e),t,s,"GET");if(o.acl)return new a(o.acl);return null}catch(e){return console.error("Error loading ACL rule by ID:",e),null}}static async create(e,n,t,s,o,r){if(!e)return null;try{let i=await (0,l.eN)("organization_acl?organization_id=".concat(e),o,r,"POST",{item_type:n,item_list:t,is_allowed:s});if(i.acl)return new a(i.acl);return null}catch(e){return console.error("Error creating ACL rule:",e),null}}async update(e,n){try{let t={item_type:this.item_type,item_list:this.item_list,is_allowed:this.is_allowed,is_active:this.is_active},s=await (0,l.eN)("organization_acl?organization_id=".concat(this.organization_id,"&acl_id=").concat(this.organization_acl_id),e,n,"PUT",t);if(s.acl)return new a(s.acl);return null}catch(e){return console.error("Error updating ACL rule:",e),null}}async delete(e,n){try{let t=await (0,l.eN)("organization_acl?organization_id=".concat(this.organization_id,"&acl_id=").concat(this.organization_acl_id),e,n,"DELETE");return!0===t.success}catch(e){return console.error("Error deleting ACL rule:",e),!1}}static async getOrganizationAllowedModels(e,n,t,s){if(!e)return[];try{let a="get_organization_allowed_models?organization_id=".concat(e);return s&&s.length>0&&(a+="&filters=".concat(s.join(","))),(await (0,l.eN)(a,n,t,"GET")).model_groups||[]}catch(e){return console.error("Error loading allowed models:",e),[]}}constructor(e){var n,t;this.organization_acl_id=e.organization_acl_id,this.organization_id=e.organization_id,this.item_type=e.item_type,this.item_list=e.item_list||[],this.is_allowed=null===(n=e.is_allowed)||void 0===n||n,this.is_active=null===(t=e.is_active)||void 0===t||t,this.created_ts=e.created_ts instanceof Date?e.created_ts:new Date(e.created_ts)}}},16538:function(e,n,t){"use strict";t.d(n,{bb:function(){return r}});var s=t(91036),l=t.n(s);let a=["p","br","strong","em","u","s","h1","h2","h3","h4","h5","h6","ul","ol","li","a","blockquote","code","pre"],o={a:["href","target","rel"]};function r(e){return l()(e,{allowedTags:a,allowedAttributes:o,allowedSchemes:["http","https","mailto"]})}},75347:function(){},31777:function(){},34017:function(){},59905:function(){}}]);