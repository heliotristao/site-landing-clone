"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3478],{1758:function(e,t,s){s.d(t,{Qd:function(){return i},UQ:function(){return o},o4:function(){return c},vF:function(){return d}});var l=s(85893);s(67294);var r=s(4307),n=s(57002),a=s(18998);let o=e=>{let{...t}=e;return(0,l.jsx)(n.fC,{"data-slot":"accordion",...t})},i=e=>{let{className:t,...s}=e;return(0,l.jsx)(n.ck,{"data-slot":"accordion-item",className:(0,a.cn)("border-b last:border-b-0",t),...s})},c=e=>{let{className:t,children:s,...o}=e;return(0,l.jsx)(n.h4,{className:"flex",children:(0,l.jsxs)(n.xz,{"data-slot":"accordion-trigger",className:(0,a.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-90",t),...o,children:[s,(0,l.jsx)(r.Z,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})},d=e=>{let{className:t,children:s,...r}=e;return(0,l.jsx)(n.VY,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...r,children:(0,l.jsx)("div",{className:(0,a.cn)("pt-0 pb-4",t),children:s})})}},76631:function(e,t,s){var l=s(85893),r=s(22495),n=s(13889),a=s(67294),o=s(79535),i=s(68760),c=s(42020),d=s(805),m=s(25675),u=s.n(m),x=s(42414),h=s(5295),f=s(28643),p=s(18998),g=s(5357);let v=(e,t)=>{let s=[],l=Math.max((t.width-32-36)/2,74),r=Math.max((t.height-32-36)/2,74);if(2===e)return s.push({x:-l,y:0}),s.push({x:l,y:0}),s;for(let t=0;t<e;t++){let n=360*t/e-90,a=l*Math.cos(n*Math.PI/180),o=r*Math.sin(n*Math.PI/180);s.push({x:a,y:o})}return s},j=e=>{let{icon:t,name:s}=e;return"string"==typeof t?(0,l.jsx)(u(),{src:t,alt:"".concat(s," icon"),width:20,height:20,className:"rounded-sm"}):(0,l.jsx)(t,{className:"text-muted-foreground size-5"})};t.Z=(0,a.memo)(e=>{let{gummieTools:t,gummieIconUrl:s,gummieName:m,responsiveWidth:u=!1}=e,N=(0,r.CG)(n.SN.selectMCPDeclarationsMap),b=(0,a.useRef)(null),[y,w]=(0,a.useState)({width:0,height:0});(0,a.useEffect)(()=>{let e=b.current;if(!e)return;let t=()=>{w({width:e.offsetWidth,height:e.offsetHeight})};t();let s=new ResizeObserver(t);return s.observe(e),()=>s.disconnect()},[]);let _=(0,a.useMemo)(()=>{let e=t||[];if(0===e.length)return[];let s=e=>{if(e.type===f.y.SAVED_ITEM||e.saved_item_id)return o.Z;if(e.type===f.y.IMAGE_GENERATOR)return i.Z;if(e.type===f.y.WEB_SEARCH)return c.Z;if(e.type===f.y.SANDBOX)return d.Z;if(e.server_id){let t=N.get(e.server_id);if(null==t?void 0:t.category)return(0,h.F1)(t.category)}return"/images/gumloop_logo_small.png"},l=v(e.length,y);return e.map((e,t)=>{let r=e.name||"Tool";return e.type===f.y.IMAGE_GENERATOR?r="Image Generation":e.type===f.y.WEB_SEARCH?r="Web Search":e.type===f.y.SAVED_ITEM?r="Flow":e.type===f.y.SANDBOX&&(r="Code Sandbox"),{tool:e,position:l[t],icon:s(e),name:r}})},[t,N,y]),k=(0,a.useRef)([]);return(0,l.jsx)("div",{className:(0,p.cn)(u?"size-full":"size-60"),children:(0,l.jsxs)("div",{ref:b,className:(0,p.cn)("relative flex size-full items-center justify-center p-4"),onMouseEnter:()=>{k.current.forEach((e,t)=>{if(e){let s=_[t].position;e.style.transform="translate(calc(-50% + ".concat(s.x,"px), calc(-50% + ").concat(s.y,"px)) ").concat(t%2==0?"rotate(8deg)":"rotate(-8deg)"," scale(1.1)")}})},onMouseLeave:()=>{k.current.forEach((e,t)=>{if(e){let s=_[t].position;e.style.transform="translate(calc(-50% + ".concat(s.x,"px), calc(-50% + ").concat(s.y,"px))")}})},children:[(0,l.jsx)(g.Z,{iconUrl:s,alt:m+" icon",size:"xl",className:"bg-background z-10 rounded-full border"}),(0,l.jsx)("div",{className:"dot-pattern dot-pattern-dark dot-pattern-dense absolute z-0 m-8 flex size-full rounded-full"}),_.map((e,t)=>{let{tool:s,position:r,icon:n,name:a}=e;return(0,l.jsx)("div",{ref:e=>k.current[t]=e,className:"bg-background absolute flex size-9 items-center justify-center rounded-full border shadow-xs transition-all duration-200",style:{left:"50%",top:"50%",transform:"translate(calc(-50% + ".concat(r.x,"px), calc(-50% + ").concat(r.y,"px))")},title:a,children:(0,l.jsxs)(x.u,{children:[(0,l.jsx)(x.aJ,{className:"cursor-default",children:(0,l.jsx)(j,{icon:n,name:a})}),(0,l.jsx)(x._v,{children:a})]})},s.server_id||s.saved_item_id||t)})]})})})},23535:function(e,t,s){s.d(t,{$:function(){return m}});var l=s(85893),r=s(67294),n=s(50382),a=s(13384),o=s(18998);let i=e=>{for(let t of[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]{11})/]){let s=e.match(t);if(s)return s[1]}return null},c=e=>{let t=e.match(/vimeo\.com\/(\d+)(?:\/([a-zA-Z0-9]+))?/);if(t){let s=t[1],l=t[2],r=e.match(/[?&]h=([a-zA-Z0-9]+)/);return{id:s,hash:l||(null==r?void 0:r[1])}}let s=e.match(/player\.vimeo\.com\/video\/(\d+)/);if(s){let t=e.match(/[?&]h=([a-zA-Z0-9]+)/);return{id:s[1],hash:null==t?void 0:t[1]}}return null},d=e=>{let{href:t,children:s}=e,n=(0,r.useMemo)(()=>i(t),[t]),a=(0,r.useMemo)(()=>c(t),[t]);if(n)return(0,l.jsx)("span",{className:"my-4 block aspect-video w-full",children:(0,l.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(n),title:"YouTube video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",sandbox:"allow-same-origin allow-scripts allow-presentation",allowFullScreen:!0,className:"h-full w-full"})});if(a){let e=a.hash?"https://player.vimeo.com/video/".concat(a.id,"?h=").concat(a.hash):"https://player.vimeo.com/video/".concat(a.id);return(0,l.jsx)("span",{className:"my-4 block aspect-video w-full",children:(0,l.jsx)("iframe",{src:e,title:"Vimeo video",allow:"autoplay; fullscreen; picture-in-picture",sandbox:"allow-same-origin allow-scripts allow-presentation",allowFullScreen:!0,className:"h-full w-full"})})}return(0,l.jsx)("a",{href:t,className:"text-accent-foreground hover:underline",children:s})},m=e=>{let{body:t,className:s}=e,i=(0,r.useMemo)(()=>({h1:e=>(0,l.jsx)("h1",{className:"text-foreground text-2xl font-semibold",...e}),h2:e=>(0,l.jsx)("h2",{className:"text-foreground text-xl font-semibold",...e}),h3:e=>(0,l.jsx)("h3",{className:"text-foreground text-lg font-semibold",...e}),h4:e=>(0,l.jsx)("h4",{className:"text-foreground text-base font-semibold",...e}),p:e=>(0,l.jsx)("p",{className:"text-foreground text-sm leading-relaxed",...e}),ul:e=>(0,l.jsx)("ul",{className:"text-foreground list-disc space-y-1 pl-6",...e}),ol:e=>(0,l.jsx)("ol",{className:"text-foreground list-decimal space-y-1 pl-6",...e}),li:e=>(0,l.jsx)("li",{className:"text-foreground text-sm",...e}),a:e=>{let{href:t,children:s}=e;return(0,l.jsx)(d,{href:t||"",children:s})},strong:e=>(0,l.jsx)("strong",{className:"text-foreground font-semibold",...e}),code:e=>(0,l.jsx)("code",{className:"bg-muted rounded px-1 py-0.5 text-sm",...e}),pre:e=>(0,l.jsx)("pre",{className:"bg-muted overflow-x-auto rounded-md p-3",...e})}),[]);return t?(0,l.jsx)("div",{className:(0,o.cn)("prose prose-sm max-w-none",s),children:(0,l.jsx)(n.U,{remarkPlugins:[a.Z],components:i,children:t})}):null}},13478:function(e,t,s){s.d(t,{wh:function(){return B}});var l=s(85893),r=s(67294),n=s(25675),a=s.n(n),o=s(41664),i=s.n(o),c=s(11163),d=s(61857),m=s(42414),u=s(5295),x=s(18998),h=s(73552),f=s(5197),p=s(94356),g=s(76631),v=s(79535),j=s(23432),N=s(71707),b=s(80734),y=s(68760),w=s(64712),_=s(1758),k=s(29876),z=s(7161),E=s(821),M=s(54178),S=s(19241),C=s(45837),Z=s(28643),A=s(90273),F=s(23535),O=s(89058);let R=e=>{let{tool:t,index:s}=e,{data:n,isLoading:a}=(0,E.DV)({path:"pipeline_preview?saved_item_id=".concat(t.saved_item_id,"&saved_item_version_id=").concat(t.saved_item_version_id),queryKey:["saved_item",t.saved_item_id,t.saved_item_version_id||""],options:{enabled:!!t.saved_item_version_id&&!!t.saved_item_id}}),o=null==n?void 0:n.flowbook_id,i=(0,r.useMemo)(()=>n?"".concat((null==n?void 0:n.flowbook_name)||""," - ").concat((null==n?void 0:n.saved_item_name)||"Flow"):t.name||"Flow",[n,t.name]);return(0,l.jsxs)(_.Qd,{value:"flow-".concat(s),className:"overflow-hidden rounded-md border !border-b",children:[(0,l.jsx)(_.o4,{className:"items-center px-3 py-3 hover:no-underline",disabled:a,children:(0,l.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,l.jsx)("div",{className:"bg-background flex size-9 shrink-0 items-center justify-center rounded-md border",children:(0,l.jsx)(v.Z,{className:"text-muted-foreground size-5"})}),(0,l.jsx)("div",{className:"flex min-w-0 items-center gap-x-2 text-left",children:a?(0,l.jsx)(j.Z,{className:"text-muted-foreground size-4 animate-spin"}):(0,l.jsx)("p",{className:"text-foreground truncate text-sm font-medium",children:i})})]})}),(0,l.jsx)(_.vF,{className:"px-3 pb-3",children:(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(null==n?void 0:n.pipeline_preview)?(0,l.jsx)("div",{className:"bg-background flex h-64 w-full items-center justify-center overflow-hidden rounded-md border",children:(0,l.jsx)(O.T,{pipelinePreview:n.pipeline_preview})}):(0,l.jsx)(d.O,{className:"h-64 w-full rounded-md"}),o&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsxs)(k.zx,{variant:"outline",size:"sm",onClick:()=>{o&&window.open("/pipeline?workbook_id=".concat(o),"_blank")},className:"gap-2",children:[(0,l.jsx)(N.Z,{className:"size-4"}),"View Workbook"]})})]})})]})},I=e=>{let{tool:t,index:s,toolIcon:n,mcpDeclaration:o}=e,{data:i,isLoading:c}=(0,S.N)(t.server_id),d=(0,r.useMemo)(()=>{if(!i)return[];let e=t.restricted_tools||[];return i.filter(t=>!(!t.id||t.is_restricted||e.includes(t.name)))},[i,t.restricted_tools]),m=t.name||"Unnamed Tool";return(0,l.jsxs)(_.Qd,{value:"server-".concat(s),className:"overflow-hidden rounded-md border !border-b",children:[(0,l.jsx)(_.o4,{className:"items-center px-3 py-3 hover:no-underline",disabled:c,children:(0,l.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,l.jsx)("div",{className:"bg-background flex size-9 shrink-0 items-center justify-center rounded-md border",children:n?(0,l.jsx)(a(),{src:n,alt:"".concat(m," icon"),width:20,height:20}):(0,l.jsx)(b.Z,{className:"text-muted-foreground size-5"})}),(0,l.jsxs)("div",{className:"flex min-w-0 items-center gap-x-2 text-left",children:[(0,l.jsx)("p",{className:"text-foreground truncate text-sm font-medium",children:m}),c?(0,l.jsx)(j.Z,{className:"text-muted-foreground size-4 animate-spin"}):d.length>0?(0,l.jsxs)("p",{className:"text-muted-foreground shrink-0 text-xs font-normal",children:[d.length," ",1===d.length?"tool":"tools"]}):null]})]})}),(0,l.jsxs)(_.vF,{className:"bg-background",children:[o&&d.length>0&&(0,l.jsx)("div",{className:"overflow-hidden",children:d.map(e=>(0,l.jsx)("div",{className:"border-b last:border-b-0",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 px-3 py-2",children:[(0,l.jsx)("span",{className:"text-foreground text-sm font-medium capitalize",children:(0,f.KD)(e.name)}),e.description&&(0,l.jsx)("span",{className:"text-muted-foreground text-xs",children:e.description})]})},e.id||e.name))}),t.description&&!o&&(0,l.jsx)("p",{className:"text-muted-foreground text-xs",children:t.description})]})]})},G=e=>{let{tool:t,index:s,icon:r}=e,n=t.type===Z.y.IMAGE_GENERATOR?"Image Generation":t.name||"Unnamed Tool",a=t.type===Z.y.IMAGE_GENERATOR?"Generate images from text descriptions using AI-powered image generation.":t.description;return(0,l.jsxs)(_.Qd,{value:"default-".concat(s),className:"overflow-hidden rounded-md border !border-b",children:[(0,l.jsx)(_.o4,{className:"items-center px-3 py-3 hover:no-underline",children:(0,l.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-3",children:[(0,l.jsx)("div",{className:"bg-background flex size-9 shrink-0 items-center justify-center rounded-md border",children:r}),(0,l.jsx)("p",{className:"text-foreground truncate text-sm font-medium",children:n})]})}),(0,l.jsx)(_.vF,{className:"px-3 pb-3",children:a&&(0,l.jsx)("p",{className:"text-muted-foreground text-xs",children:a})})]})},T=e=>{var t;let{open:s,onOpenChange:n,organizationId:a,templateSlug:o,templateName:i,children:m}=e,x=(0,c.useRouter)(),{userProfile:f,idTokenRef:p}=(0,C.H)(),[g,v]=(0,M.P)({open:s,onOpenChange:n}),[j,N]=(0,r.useState)(!1),{data:S,isLoading:O}=(0,E.DV)({path:"template_pages/organization/".concat(a,"/").concat(o),queryKey:["organization-template-page",a,o],options:{enabled:g&&!!o&&!!a}}),{data:T=[]}=(0,E.iZ)({path:"gumcp_declarations",queryKey:["gumcp_declarations"],options:{enabled:g}}),D=async()=>{try{N(!0);let e=await (0,A.eN)("template_pages/".concat(o,"/clone"),f,p.current,"POST",{organization_id:a});e.success&&e.target_id&&(x.push("/agents/".concat(e.target_id)),v(!1))}catch(e){w.Am.error("Failed to clone agent"),console.error("Failed to clone agent:",e)}finally{N(!1)}},P=(null==S?void 0:null===(t=S.checklist)||void 0===t?void 0:t.filter(e=>e.title))||[],U=(0,r.useMemo)(()=>{let e=new Map;return null==T||T.forEach(t=>{e.set(t.server_id,t)}),e},[T]);return(0,l.jsx)(z.Vq,{open:g,onOpenChange:v,children:(0,l.jsxs)(z.cZ,{className:"flex h-[80vh] w-full max-w-5xl! flex-col",children:[(0,l.jsxs)(z.a7,{className:"flex flex-1 flex-col gap-0 overflow-hidden p-0",children:[(0,l.jsxs)(z.fK,{className:"shrink-0 border-b p-6",children:[(0,l.jsx)(z.$N,{children:i}),S&&(0,l.jsxs)(z.Be,{children:[S.creator&&(0,l.jsxs)("span",{children:["Created by"," ",(0,h.G)({firstName:S.creator.first_name,lastName:S.creator.last_name})]}),S.creator&&S.created_ts&&(0,l.jsx)("span",{children:" â€¢ "}),S.created_ts&&(0,l.jsx)("span",{children:new Date(S.created_ts).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),O?(0,l.jsxs)("div",{className:"flex flex-1 gap-6 overflow-hidden p-6",children:[(0,l.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,l.jsx)(d.O,{className:"h-6 w-32"}),(0,l.jsx)(d.O,{className:"h-32 w-full"}),(0,l.jsx)(d.O,{className:"h-6 w-32"}),(0,l.jsx)(d.O,{className:"h-24 w-full"})]}),(0,l.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,l.jsx)(d.O,{className:"h-6 w-32"}),(0,l.jsx)(d.O,{className:"h-48 w-full"})]})]}):(0,l.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-6 overflow-y-auto border-r p-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-foreground mb-3 text-base font-semibold",children:"Description"}),(0,l.jsx)(F.$,{body:null==S?void 0:S.body})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-foreground mb-3 text-base font-semibold",children:"Setup Instructions"}),(0,l.jsx)("div",{className:"space-y-3",children:P.length>0?P.map((e,t)=>(0,l.jsxs)("div",{className:"space-y-1 border-b pb-3 last:border-b-0",children:[(0,l.jsxs)("p",{className:"text-foreground text-sm font-medium",children:[t+1,". ",e.title]}),e.description&&(0,l.jsx)("p",{className:"text-muted-foreground pl-4 text-sm",children:e.description})]},"step-".concat(t))):(0,l.jsx)("div",{className:"border-muted-foreground/20 grid place-items-center rounded-md border border-dashed p-8",children:(0,l.jsx)("p",{className:"text-muted-foreground text-sm",children:"No setup instructions available"})})})]})]}),(0,l.jsx)("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto p-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-foreground mb-3 text-base font-semibold",children:"Tools"}),(null==S?void 0:S.tools)&&S.tools.length>0?(0,l.jsx)(_.UQ,{type:"single",collapsible:!0,className:"flex flex-col gap-2",children:S.tools.map((e,t)=>{if(e.type===Z.y.SAVED_ITEM)return(0,l.jsx)(R,{tool:e,index:t},"flow-".concat(t));if(e.type===Z.y.IMAGE_GENERATOR)return(0,l.jsx)(G,{tool:e,index:t,icon:(0,l.jsx)(y.Z,{className:"text-muted-foreground size-5"})},"image-".concat(t));if(e.type===Z.y.GUMCP_SERVER||e.type===Z.y.MCP_SERVER){var s,r;let n=e.server_id&&null!==(s=U.get(e.server_id))&&void 0!==s?s:null,a=(0,u.F1)(null!==(r=null==n?void 0:n.category)&&void 0!==r?r:"");return(0,l.jsx)(I,{tool:e,index:t,toolIcon:a,mcpDeclaration:n},"server-".concat(t))}return(0,l.jsx)(G,{tool:e,index:t,icon:(0,l.jsx)(b.Z,{className:"text-muted-foreground size-5"})},"default-".concat(t))})}):(0,l.jsx)("div",{className:"border-muted-foreground/20 grid place-items-center rounded-md border border-dashed p-8",children:(0,l.jsx)("p",{className:"text-muted-foreground text-sm",children:"No tools available"})})]})})]})]}),(0,l.jsxs)(z.cN,{className:"shrink-0 p-6",children:[(0,l.jsx)(k.zx,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),(0,l.jsx)(k.zx,{onClick:D,disabled:j||O,children:j?"Copying...":"Copy Template"})]})]})})},D=e=>{let t=u.Qr.find(t=>t.name===e);return(null==t?void 0:t.icon)||"/images/gumloop_logo_small.png"},P=e=>{let{iconSrc:t,alt:s,tooltipContent:r}=e;return(0,l.jsxs)(m.u,{children:[(0,l.jsx)(m.aJ,{asChild:!0,children:(0,l.jsx)("div",{className:"bg-background flex size-8 items-center justify-center border-r",children:(0,l.jsx)(a(),{src:t,alt:s,width:20,height:20})})}),(0,l.jsx)(m._v,{side:"top",variant:"outline",className:"flex flex-col gap-1",children:r})]})},U=e=>{let{count:t,items:s}=e;return(0,l.jsxs)(m.u,{children:[(0,l.jsx)(m.aJ,{asChild:!0,children:(0,l.jsx)("div",{className:"bg-background flex size-8 cursor-pointer items-center justify-center border-r",children:(0,l.jsxs)("span",{className:"text-muted-foreground text-xs font-medium",children:["+",t]})})}),(0,l.jsx)(m._v,{side:"top",variant:"outline",children:(0,l.jsx)("div",{className:"flex flex-col gap-2 py-1",children:s.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(a(),{src:e.iconSrc,alt:e.alt,width:16,height:16}),e.content]},e.key))})})]})},V=e=>{let{integrations:t,tools:s,maxItems:r=4}=e,n=e=>e>r?e-r+1:0,a=e=>e.length>r?e.slice(r-1):[],o=e=>{let t=e.length>r?r-1:r;return e.slice(0,t)};if(s&&s.length>0){let e=o(s),t=n(s.length),r=a(s);return(0,l.jsxs)(l.Fragment,{children:[e.map(e=>{var t,s;return(0,l.jsx)(P,{iconSrc:(0,u.F1)(null!==(t=e.name)&&void 0!==t?t:""),alt:null!==(s=e.name)&&void 0!==s?s:"",tooltipContent:(0,l.jsx)("p",{children:e.name})},e.slug)}),t>0&&(0,l.jsx)(U,{count:t,items:r.map(e=>{var t,s;return{key:e.slug||e.name||"",iconSrc:(0,u.F1)(null!==(t=e.name)&&void 0!==t?t:""),alt:null!==(s=e.name)&&void 0!==s?s:"",content:(0,l.jsx)("span",{children:e.name})}})})]})}if(t&&t.length>0){let e=o(t),s=n(t.length),r=a(t);return(0,l.jsxs)(l.Fragment,{children:[e.map(e=>(0,l.jsx)(P,{iconSrc:D(e.category),alt:"".concat(e.category," icon"),tooltipContent:(0,l.jsx)(l.Fragment,{children:e.nodes.map(e=>(0,l.jsx)("span",{children:e},e))})},e.category)),s>0&&(0,l.jsx)(U,{count:s,items:r.map(e=>({key:e.category,iconSrc:D(e.category),alt:"".concat(e.category," icon"),content:(0,l.jsx)("span",{children:e.nodes.join(",")})}))})]})}return null},B=e=>{var t,s,n,a,o,i,m;let{template:u,maxIntegrationTools:p=4,variant:v="default",organizationId:j}=e,N=(0,c.useRouter)(),b="organization"===v,[y,w]=(0,r.useState)(!1),_=(0,h.G)({firstName:null===(t=u.creator)||void 0===t?void 0:t.first_name,lastName:null===(s=u.creator)||void 0===s?void 0:s.last_name}),k="GUMMIE"===u.type,z=(()=>{if(b)return"FLOWBOOK"===u.type?"/pipeline?workbook_id=".concat(u.target_id):"GUMMIE"===u.type?"/agents/".concat(u.target_id):"/templates/organization";let e=N.asPath.match(/\/templates\/solutions\/([^/?#]+)/),t=e?e[1]:null;return t?"/templates/".concat(u.slug,"?from=").concat(t):"/templates/".concat(u.slug)})();return(0,l.jsxs)(l.Fragment,{children:[b&&k&&j&&(0,l.jsx)(T,{open:y,onOpenChange:w,organizationId:j,templateSlug:u.slug,templateName:u.name}),(0,l.jsxs)("div",{onClick:()=>{b&&k?w(!0):N.push(z)},className:"group/card flex h-full flex-col gap-3",children:[(0,l.jsxs)("div",{className:(0,x.cn)("bg-background flex flex-1 cursor-pointer flex-col border transition-colors group-hover/card:shadow-sm",b&&"overflow-hidden rounded-md"),children:[(0,l.jsx)("div",{className:(0,x.cn)("group-hover/card:bg-muted/50 flex","h-9","shrink-0 items-center overflow-clip border-b",!b&&"line-pattern"),children:(0,l.jsxs)("div",{className:(0,x.cn)("flex w-full items-center justify-between",b&&"px-0.5"),children:[!u.tools&&(0,l.jsx)("div",{className:"flex flex-wrap",children:(0,l.jsx)(V,{integrations:u.integrations,tools:u.tools,maxItems:p})}),(0,l.jsxs)("div",{className:"text-muted-foreground mr-3 flex flex-1 flex-shrink-0 items-center justify-end gap-1",children:[(null==u?void 0:u.pageviews)!=null&&0!==u.pageviews&&(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("p",{className:"text-sm",children:[(0,f.xR)(u.pageviews)," ",1===u.pageviews?"view":"views"]}),(0,l.jsx)("span",{className:"bg-muted-foreground flex size-1 rounded-full"})]}),(null==u?void 0:u.created_ts)&&(0,l.jsx)("p",{className:"text-sm",children:(0,f.Sy)(new Date(u.created_ts),!0)})]})]})}),k?(0,l.jsx)("div",{className:"flex h-52 w-full shrink-0 items-center justify-center overflow-hidden p-4",children:(0,l.jsx)(g.Z,{gummieTools:null!==(o=u.tools)&&void 0!==o?o:[],gummieIconUrl:u.icon_url,gummieName:u.name,responsiveWidth:!0})}):(0,l.jsx)(r.Fragment,{children:u.pipeline_preview?(0,l.jsx)("div",{className:"flex h-52 w-full shrink-0 items-center justify-center overflow-hidden p-3",children:(0,l.jsx)(O.T,{pipelinePreview:u.pipeline_preview,showControls:!1,allowInteraction:!1,showBackground:!b})}):(0,l.jsx)("div",{className:"flex h-52 w-full shrink-0 items-center justify-center overflow-hidden p-3",children:(0,l.jsx)(d.O,{className:"h-full w-full"})})})]}),(0,l.jsx)(Q,{variant:v,creatorUsername:null!==(i=null===(n=u.creator)||void 0===n?void 0:n.username)&&void 0!==i?i:"",creatorProfilePicture:null!==(m=null===(a=u.creator)||void 0===a?void 0:a.profile_picture)&&void 0!==m?m:"",creatorDisplayName:_,templateName:u.name,templateHref:z})]},u.slug)]})},Q=e=>{let{creatorUsername:t,creatorProfilePicture:s,creatorDisplayName:r,templateName:n,templateHref:a,variant:o}=e,c=e=>{e.stopPropagation()};return(0,l.jsxs)("div",{className:"hover:text-accent-foreground flex min-h-[4.25rem] gap-2 pl-2",children:["default"===o&&(0,l.jsx)(i(),{className:"relative flex size-9 shrink-0",href:"/creators/".concat(null!=t?t:""),onClick:c,children:(0,l.jsx)(p.Z,{name:r,src:s,className:"size-9 rounded-full"})}),"organization"===o&&(0,l.jsx)(p.Z,{name:r,src:s,className:"size-9 rounded-full"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(i(),{href:a,className:"text-foreground text-sm font-medium group-hover/card:underline",children:(0,l.jsx)("p",{className:"line-clamp-2",children:n})}),"default"===o&&(0,l.jsx)(i(),{href:"/creators/".concat(null!=t?t:""),className:"text-muted-foreground text-sm hover:underline",onClick:c,children:r}),"organization"===o&&(0,l.jsx)("p",{className:"text-muted-foreground text-sm",children:r})]})]})}}}]);